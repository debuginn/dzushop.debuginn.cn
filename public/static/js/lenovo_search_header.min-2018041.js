function getQueryString(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?decodeURIComponent(c[2]):""}function getLeid(){for(var a="",b=document.cookie.split(";"),c=0;c<b.length;c++)if("leid"==b[c].split("=")[0].trim()){a=b[c].split("=")[1];break}return a}function checkisMachineNo(a){a=$.trim(a);var b=$.trim(a);return""==b.replace(/[0-9a-z]/gi,"")&&((8==b.length||10==b.length||14==b.length||18==b.length)&&("thinkpad"!=b.toLowerCase()&&"motorola"!=b.toLowerCase()&&"thinkagile"!=b.toLowerCase()))}function plugin0(){return document.getElementById("plugin0")}function addEvent(a,b,c){window.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function load(){addEvent(plugin(),"test",function(){alert("Received a test event from the plugin.")})}function pluginLoaded(){try{return plugin().getMachineNum()}catch(a){return!1}}function addTestEvent(){addEvent(plugin(),"echo",function(a,b){alert(a+b)})}function testEvent(){plugin().testEvent()}function pluginValid(){plugin().valid?alert(plugin().echo("This plugin seems to be working!")):alert("Plugin is not working :(")}function DoubleClick(a){var b=!1,c=!1,d=Math.random()+"",e=(new Date,document.createElement("iframe"));e.style.display="none",e.onload=e.onreadystatechange=function(){b=!0,e.onload=e.onreadystatechange=null,$(e).remove(),c||a&&a()},e.src="https://6895322.fls.doubleclick.net/activityi;src=6895322;type=lenov0;cat=__uvs0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1;num="+d+"?",document.body.appendChild(e),function(d,e){function f(a){return setTimeout(function(){g>=d?a():f(a),g+=e},e)}var g=0;f(function(){b||(c=!0,a&&a())})}(300,60)}function autoAjax(a,b){console.log("111"),channelType=$("#searchkey")&&$.trim($("#searchkey").val()).length>0?$("#searchkey").val():"",$("a[tag=searchButton]").attr("latag","latag_pc_search_搜索框_框_直接输入_"+$("input[latag=latag_pc_search_keyword]").val()),$.ajax({url:tmp_search_url+"/search/suggest?kw="+encodeURIComponent($(".think_search_header input[type=text]").val())+"&plat=4&leid="+encodeURIComponent(getLeid())+"&terminal=1&channel="+channelType+"&url="+encodeURIComponent(document.URL),type:"GET",jsonp:"cb",dataType:"jsonp",success:function(a){if("0"==a.rc){var c=[],d=[];if(b.suggest.html(""),a.detail&&a.detail.length>0){c.push("<div class='search_tipinfo detail'><p>快速链接</p><ul>");for(var e=0;e<a.detail.length;e++){var f=a.detail[e];c.push("<li latag='latag_pc_search_搜索框_框_快速连接_"+f.word+"' data-type='detail' class='apperceive_item' title='"+f.word+"' data_href='"+f.url+"'><a href='"+f.url+"'  class='left_item' >"+f.word+"</a></li>")}c.push("</ul></div>")}if(a.normal&&a.normal.length>0){d.push("<div class='search_tipinfo normal'><p>搜索结果建议</p><ul>");for(var g=a.normal,e=0;e<g.length;e++)"cate"==g[e].type?d.push("<li data-type='normal' latag='latag_pc_search_搜索框_框_结果建议_"+g[e].word+"' class='apperceive_item' title='"+g[e].word+"'><i></i><a href='"+tmp_search_url+"/search/?index="+g[e].code+"&key="+encodeURIComponent(g[e].word)+"'  class='left_item' >"+g[e].word+"</a><a class='right_item' href='jajvascript://'>约"+g[e].resultCount+"个商品</a></li>"):"goods"==g[e].type?d.push("<li data-type='normal' latag='latag_pc_search_搜索框_框_结果建议_"+g[e].word+"' class='apperceive_item' title='"+g[e].word+"'><i></i><a href='"+tmp_lenovo_detail+g[e].code+".html?key="+encodeURIComponent(g[e].word)+"' class='left_item'>"+g[e].word+"</a><a class='right_item' href='jajvascript://'>约"+g[e].resultCount+"个商品</a></li>"):"1"==g[e].his?d.push("<li data-type='normal' latag='latag_pc_search_搜索框_框_结果建议_"+g[e].word+"' class='history_item history_normal' title='"+g[e].word+"'><i></i><a class='left_item' href='javascript://;'>"+g[e].word+"</a><a class='right_item del' word='"+g[e].word+"' tag='del'>删除</a><a class='right_item' href='jajvascript://'>历史记录</a></li>"):d.push("<li data-type='normal' latag='latag_pc_search_搜索框_框_结果建议_"+g[e].word+"' class='apperceive_item' title='"+g[e].word+"'><i></i><a href='"+tmp_search_url+"/search/?key="+encodeURIComponent(g[e].word)+"' class='left_item'>"+g[e].word+"</a><a class='right_item' href='jajvascript://'>约"+g[e].resultCount+"个商品</a></li>");d.push("</ul></div>"),current_index=0}if(a.detail&&a.detail.length>0||a.normal&&a.normal.length>0){var h=c.join("")+d.join("");b.suggest.html(h).show()}else b.suggest.hide()}}})}function getItemsInAutoCompletedList(a){var b=null;return $("#suggestContainer .normal a").each(function(){if($(this).text().trim().toLowerCase()==a.trim().toLowerCase())return b=$(this),!1}),b}function goDestination(a){$.ajax({url:tmp_search_url+"/search/v2/destination?keyword="+encodeURIComponent(a),type:"GET",jsonp:"cb",async:!1,dataType:"jsonp",success:function(b){200==b.status&&b.data&&(b.data.url?window.location.href=b.data.url:window.location.href=tmp_search_url+"/search/?key="+encodeURIComponent(a))}})}var tmp_search_url="//s.lenovo.com.cn",tmp_think_detail="//www.thinkworldshop.com.cn/pm/",tmp_lenovo_detail="//www.lenovo.com.cn/product/";String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},plugin=plugin0;var current_index=1;AutoComplete.constructor=function(a){var b,c="oninput"in window?"input":"keyup";if(this.tip=a.tip||getQueryString("key")?getQueryString("key"):"",this.input=a.input,this.input){if(this.input.val(this.tip),this.form=a.form,!this.form&&(b=this.input.parents("form"))&&b.length&&(this.form=b,b=null),this.submit=a.submit||this.submit,this.getDatas=a.getDatas||this.getDatas,this.suggest=a.suggest,!this.suggest){var d=document.createElement("div"),e=getPosition(this.input[0],"offsetLeft"),f=getPosition(this.input[0],"offsetTop")+this.input.height();d.style.cssText="position:absolute;top:"+f+"px;left:"+e+"px",document.body.appendChild(d),this.suggest=jQuery(d)}this.suggest.hide(),this.list=(a.list||"li").toLowerCase(),this.hover=a.hover||"hover",this.input.focus(jQuery.proxy(this.focus,this)),this.input.blur(jQuery.proxy(this.blur,this)),this.input.keydown(jQuery.proxy(this.keydown,this)),this.input.bind(c,jQuery.proxy(this.textInput,this)),this.form&&this.form.bind("submit",jQuery.proxy(this.submit,this)),this.suggest.delegate(this.list,"mouseover",jQuery.proxy(this.mouseover,this)),this.suggest.delegate(this.list,"click",jQuery.proxy(this.click,this))}},AutoComplete.prototype.keydown=function(a){var b=a.keyCode,c=this.list,d=this.hover;if(b>=37&&b<=40){if(!this.suggest.find(c).length)return;a.preventDefault(),0==current_index&&(this.current=null),this.suggest.find(c).removeClass(d).removeClass("activity"),this.current=37==b||38==b?this.current?this.current.prev().length?this.current.prev():this.current.parent().parent().prev().find(c).length>0?this.current.parent().parent().prev().find(c).last():this.suggest.find(c).last():this.suggest.find(c).last():this.current?this.current.next().length?this.current.next():this.current.parent().parent().next().find(c).length>0?this.current.parent().parent().next().find(c).first():this.suggest.find(c).first():this.suggest.find(c).first(),this.current.addClass(d),this.setInputValue()}else if(13==b&&!this.form){var e=this;e.submit()}current_index=1};var channelType=$("#searchkey")&&$.trim($("#searchkey").val()).length>0?$("#searchkey").val():"",defaultKey="",searchAuto=Class.create({setInputValue:function(){var a;this.current&&(a=this.current.attr("title")||this.current.text(),this.input.val(a))},focus:function(){var a=this;$(".think_search_header ul").hide();var b=$(".think_search_header input[type=text]").val();b==defaultKey||""==b?($(".think_search_header input[type=text]").val(""),autoAjax("",a)):autoAjax(b,a)},blur:function(){},click:function(a){var b=a.target;if("del"!=$(b).attr("tag"))return this.input.val($(b).parent().attr("title")),!0;var c=$(b).attr("word");$.ajax({url:tmp_search_url+"/search/suggestDelete?kw="+encodeURIComponent(c)+"&plat=4&leid="+encodeURIComponent(getLeid())+"&ran="+Math.random(),type:"GET",jsonp:"cb",dataType:"jsonp",success:function(a){"0"==a.rc&&$(b).parent().remove()}}),a.stopPropagation()}},AutoComplete),commonSearch=function(){var that=this;this.current=$("#suggestContainer li:eq(0)"),this.channelType=$("#searchkey")&&$.trim($("#searchkey").val()).length>0?$("#searchkey").val():"default",this.snReader=null,this.init=function(){that.setSearchTextPlaceHolder(),that.setKeyWord(),this.regGetHotWords(),that.regEvent()},this.regEvent=function(){that.regContainerListMouseover(),that.regDelKeywordsHover(),that.regSearchButtonClick(),that.regBodyClick(),that.regSearchLiClick(),that.regSearchBtnHover()},this.regChkeckService=function(){var a=!0;document.URL.indexOf("getmachine_no")>-1||document.URL.indexOf("service_index")>-1||(a=!1),"server"!=that.channelType||a?$(".search_box .btn_get_machineno,.search_box .btn_haoget_machineno").hide():$(".search_box .btn_get_machineno,.search_box .btn_haoget_machineno").show()},this.regGoHaoGetMachineNo=function(){$(document).delegate("#btn_haoget_machineno","click",function(){window.open(tmp_search_url+"/getmachine_no.html")})},this.regGetMachineNo=function(){$(document).delegate("a.btn_get_machineno","click",function(){that.checkValue($(".search_box input[latag=latag_pc_search_keyword]"),7)})},this.checkValue=function(a,b){if(!(window.ActiveXObject||"ActiveXObject"in window))return void alert("抱歉，此功能目前只在IE浏览器下可用！");if(load(),pluginLoaded())setTimeout(function(){var b=pluginLoaded();if(void 0!==b&&b.length>7)try{a.val(b)}catch(c){parent.window,self.window,alert("主机编号未能正确识别")}else parent.window,self.window,alert("主机编号未能正确识别")},10);else{if(-1!=navigator.userAgent.toLowerCase().indexOf("firefox/3"))return void alert("自动获取主机编号软件不支持火狐浏览器，建议使用IE浏览器安装此软件");var c=parent.document.URL;parent.window==self.window?window.location.href=tmp_search_url+"/sn_readner_install.html?strurl="+c:window.open(tmp_search_url+"/sn_readner_install.html?strurl=window.close","sn")}},this.regSearchBtnHover=function(){$("a.serch_box_img").hover(function(){$(".search_box input").addClass("activity")},function(){$(".search_box input").removeClass("activity")})},this.regGetHotWords=function(){var a="//s.lenovo.com.cn/search/?key=",b="//s.lenovo.com.cn/search/selCHannelHotWords?key="+that.channelType;document.URL.indexOf("lenovouat")>-1&&(a="//s.lenovouat.com?key=",b="//s.lenovouat.com/search/selCHannelHotWords?key="+that.channelType);var c="";$.ajax({url:b,jsonp:"cb",dataType:"jsonp",success:function(b){if("0"==b.rc){if(b.keywords.length>0)for(var d=0;d<1;d++)c+="<li><a href='"+a+b.keywords[d]+"'>"+b.keywords[d]+"</a></li>";$(".search_box ul.resou_keyword").html(c)}},error:function(){}})},this.regSearchLiClick=function(){$("#suggestContainer").delegate(".normal li","click",function(){var a=event.target;"del"==$(a).attr("tag")||($(this).hasClass("history_normal")?goDestination($(this).attr("title")):window.location.href=$(this).find("a.left_item").attr("href"))}),$("#suggestContainer").delegate(".detail li","click",function(){$(this).attr("data_href")&&""!=$(this).attr("data_href")&&(window.location.href=$(this).attr("data_href"))})},this.setKeyWord=function(){getQueryString("key")?($(".think_search_header input[type=text]").val(getQueryString("key")),$(".think_search_header ul").hide()):($(".think_search_header input[type=text]").val(""),$(".think_search_header ul").show())},this.setSearchTextPlaceHolder=function(){var ajax_url="//s.lenovo.com.cn/search/getDefaultHotwordV2?shopId=1&terminal=1&channel="+that.channelType+"&url="+encodeURIComponent(document.URL);document.URL.indexOf("lenovouat")>-1&&(ajax_url="//s.lenovouat.com/search/getDefaultHotwordV2?shopId=1&terminal=1&channel="+that.channelType+"&url="+encodeURIComponent(document.URL)),$.ajax({url:ajax_url,jsonp:"cb",async:!1,dataType:"jsonp",success:function(res){"0"==res.rc&&res.data&&(res.data=eval("("+res.data+")"),$(".think_search_header input[type=text]").attr("placeholder",res.data.showWord?res.data.showWord:""),$(".think_search_header input[type=text]").attr("placeholder-key",res.data.word?res.data.word:""),$(".think_search_header input[type=text]").attr("placeholder-url",res.data.toUrlPc?res.data.toUrlPc:""))},error:function(){}})},this.regContainerListMouseover=function(){$("#suggestContainer").delegate("li","mouseover",function(){$(this).addClass("activity")}),$("#suggestContainer").delegate("li","mouseout",function(){$(this).removeClass("activity")})},this.regDelKeywordsHover=function(){$(".search_box").delegate("#remove_keyword","mouseover",function(){$(this).addClass("activity")}),$(".search_box").delegate("#remove_keyword","mouseout",function(){$(this).removeClass("activity")})},this.regSearchButtonClick=function(){$("body").delegate(".think_search_header a[tag=searchButton]","click",function(){var a=$(this).next().val();$("a[tag=searchButton]").attr("latag","latag_pc_search_搜索框_框_直接输入_"+$("input[latag=latag_pc_search_keyword]").val());var b=$(".think_search_header input[type=text]").attr("placeholder-key")?$(".think_search_header input[type=text]").attr("placeholder-key"):"",c=$(".think_search_header input[type=text]").attr("placeholder-url")?$(".think_search_header input[type=text]").attr("placeholder-url"):"";a==defaultKey&&(a="");var d=getItemsInAutoCompletedList(a);DoubleClick(function(){d?window.location.href=d.attr("href"):""==a?""!=c?window.location.href=c:goDestination(b):goDestination(a)})})},this.regBodyClick=function(){$("body").click(function(a){var b=$(a.target);if("latag_pc_search_keyword"==b.attr("latag")){var c=$(".think_search_header input[type=text]").val();""==$.trim(c)?$(".think_search_header i").hide():$(".think_search_header i").show(),$(".search_box ul.resou_keyword").hide();var d={input:$(".think_search_header input[type=text]"),suggest:$("#suggestContainer"),tip:getQueryString("key")?" ":defaultKey};autoAjax("",d)}else if("del"==b.attr("tag"))$("#suggestContainer").show();else if("remove_keyword"==b.attr("id")){$(".think_search_header input[type=text]").val("");var d={input:$(".think_search_header input[type=text]"),suggest:$("#suggestContainer"),tip:getQueryString("key")?" ":defaultKey};autoAjax("",d)}else""==$(".think_search_header input[type=text]").val()?($(".think_search_header ul").show(),$(".think_search_header input[type=text]").val(defaultKey)):$(".think_search_header input[type=text]").val()==defaultKey?$(".think_search_header ul").show():$(".think_search_header ul").hide(),$("#suggestContainer").hide()})}};$(function(){(new commonSearch).init();var a=1;new searchAuto({input:$(".think_search_header input[type=text]"),suggest:$("#suggestContainer"),tip:getQueryString("key")?" ":defaultKey,getDatas:function(b){var c=this,d=$.trim($(".think_search_header input[type=text]").val());""==$.trim(d)?$(".think_search_header i").hide():$(".think_search_header i").show(),0==a&&autoAjax(d,c),a=0},submit:function(){this.suggest.hide();var a=$(".think_search_header input[type=text]").val();$("a[tag=searchButton]").attr("latag","latag_pc_search_搜索框_框_直接输入_"+$("input[latag=latag_pc_search_keyword]").val());var b=$(".think_search_header input[type=text]").attr("placeholder-key")?$(".think_search_header input[type=text]").attr("placeholder-key"):"",c=$(".think_search_header input[type=text]").attr("placeholder-url")?$(".think_search_header input[type=text]").attr("placeholder-url"):"";a==defaultKey&&(a="");var d=getItemsInAutoCompletedList(a);DoubleClick(function(){d?window.location.href=d.attr("href"):""==a?""!=c?window.location.href=c:goDestination(b):goDestination(a)})}})});
function autoComplete(t){$(".search-div").empty();var e;window.location.href.indexOf("notebook")>1?e="笔记本":window.location.href.indexOf("desktop")>1&&(e="台式机"),""==t?$(".search-div").addClass("hidden"):$.ajax({type:"get",data:{limit:100},url:apihref+"/drive/like/"+encodeURIComponent(t)}).done(function(e){""==e.data?$(".search-div").addClass("hidden"):$(".search-div").removeClass("hidden");var n="";e.data.forEach(function(e){var o=e.replace(new RegExp(t,"ig"),function(t){return'<span style="color: #3e8ddd;">'+t+"</span>"});n+='<li data="'+e+'"><a href="javascript:void(0)">'+o+"</a></li>"}),$(".search-div").show(),$(".search-div").append(n)})}$(function(){var t=localStorage.getItem("q");$("input, #search").placeholder({isUseSpan:!0,onInput:!1}),null!=t&&""!=t&&($(".wrap-placeholder").hide(),$(".search-content input").val(t)),$(".search-content input").on("keydown",function(t){util.stopPropagation(t);var e=$(".search-content input").val();"13"==t.keyCode&&(""==e?($(".search-content input").blur(),lnv.alert({content:"请输入搜索内容"})):(window.location.href.indexOf("notebook")>1?util.useractionCollect(e,"笔记本全站搜索"):window.location.href.indexOf("desktop")>1&&util.useractionCollect(e,"台式机全站搜索"),localStorage.setItem("q",e),$(".search-content input").val(""),window.open("search_result.html?q="+e)))});var e=!1;$(".search-div").on("click","li",function(t){util.stopPropagation(t),localStorage.setItem("q",$(this).attr("data")),window.open("search_result.html?q="+$(this).attr("data"))}),$(".search-content button").on("click",function(t){util.stopPropagation(t),val=$(".search-content input").val(),""==val?($(".search-content input").blur(),lnv.alert({content:"请输入搜索内容"})):(window.location.href.indexOf("notebook")>1?util.useractionCollect(val,"笔记本全站搜索"):window.location.href.indexOf("desktop")>1&&util.useractionCollect(val,"台式机全站搜索"),localStorage.setItem("q",val),$(".search-content input").val(""),window.open("search_result.html?q="+val))}),$(".search-content input").on("input",function(){val=$(this).val(),clearTimeout(e),e=setTimeout(function(){autoComplete(val)},1e3)}),$(".search-content input").on("focus",function(t){""!=$(this).val()&&autoComplete($(this).val())}),$(document).click(function(){var t=$(".search-div");"block"==t.css("display")&&t.hide()})});
!function(){function t(t){this.data={topLocationAdId:"85332167-c7da-46b7-bdeb-bd8a0f976978",bottomLocationAdId:"a55ebec5-6d2a-4315-a2f1-6846becc20d3",iconAdId:"0b00d2d1-186a-11e9-bbc9-0050569f690d"},t&&this.init()}t.prototype={constructor:t,init:function(){this.jsonpAdverTopImg(),this.jsonpAdverBottomImg(),this.jsonpAdverIconImg()},jsonpAdverTopImg:function(){var t=this,e=window.tempProInfo;e&&$.ajax({type:"GET",url:PDUtil.getItemDomain()+"/ad/advertising/front/query",data:{mallType:e.mallType,faId:e.faId,adSpaceId:t.data.topLocationAdId,productGroupId:e.productGroupId,goodsCode:window.code},dataType:"jsonp",jsonp:"callback",success:function(e){var i=e.data.result;0!==i.length&&t.addAdverImg("top",i)},error:function(t){PDUtil.debug("invoke adverManage error ------------->")}})},jsonpAdverBottomImg:function(){var t=this,e=window.tempProInfo;e&&$.ajax({type:"GET",url:PDUtil.getItemDomain()+"/ad/advertising/front/query",data:{mallType:e.mallType,faId:e.faId,adSpaceId:t.data.bottomLocationAdId,productGroupId:e.productGroupId,goodsCode:window.code},dataType:"jsonp",jsonp:"callback",success:function(e){var i=e.data.result;0!==i.length&&t.addAdverImg("bottom",i)},error:function(t){PDUtil.debug("invoke adverManage error ------------->")}})},jsonpAdverIconImg:function(){var t=this,e=window.tempProInfo;e&&$.ajax({type:"GET",url:PDUtil.getItemDomain()+"/ad/advertising/front/query",data:{mallType:e.mallType,faId:e.faId,adSpaceId:t.data.iconAdId,productGroupId:e.productGroupId,goodsCode:window.code},dataType:"jsonp",jsonp:"callback",success:function(e){var i=e.data.result;0!==i.length&&t.addAdverImg("rightTop",i)},error:function(t){PDUtil.debug("invoke adverManage error ------------->")}})},addAdverImg:function(t,e){var i=t,n=e;if("top"===i){var a,o=$("#box_information"),s=o.find(".images");$.each(n,function(t,e){$.each(e.contentList,function(e,i){10===i.adType&&(a=$('<a target="_blank" id="bannerUrl'+t+'"><img id="bannerImg'+t+'"></img></a>'),$("body").attr("style","overflow-x:hidden"),a.insertBefore(s),$("#bannerUrl"+t).attr("href",i.link),$("#bannerImg"+t).attr("src",i.imgUrl))})})}if("bottom"===i){var a,r=$(".shop_footer");$.each(n,function(t,e){$.each(e.contentList,function(e,i){10===i.adType&&(a=$('<a target="_blank" id="bottomBannerUrl'+t+'"><img class="bottomBannerstyle" id="bottomBannerImg'+t+'"></img></a>'),$("body").attr("style","overflow-x:hidden"),a.insertBefore(r),$("#bottomBannerUrl"+t).attr("href",i.link),$("#bottomBannerImg"+t).attr("src",i.imgUrl))})})}if("rightTop"===i){var a,c=$("#detail_left");$.each(n,function(t,e){$.each(e.contentList,function(e,i){10===i.adType&&(a=$('<a href="javascript:;" target="_blank" class="cornerIcon" id="iconBannerUrl'+t+'"><img class="iconBannerstyle" id="iconBannerImg'+t+'"></img></a>'),c.prepend(a),$("#iconBannerUrl"+t).attr("href",i.link),$("#iconBannerImg"+t).attr("src",i.imgUrl))})})}}},window.components||(window.components={}),window.components.adverManage=t}(),function(){function t(t){this.data={},this.$ppicture=$("#ppicture"),this.$button_open=$("#ppicture_open"),this.$button_close=$("#ppicture_close"),this.$button_up=$("#ppicture_up"),this.$button_down=$("#ppicture_down"),this.$div_checked=this.$ppicture.find("div.pp-checked"),this.$ul=$("#ppscroll_ul"),this.maxShowNumber=4,this.currentIndex=1,this.windowIndex=1,this.page=1,this.totalPage=1,this.totalCount=0,t&&this.init()}t.prototype={constructor:t,init:function(){$(window).height()>=850&&this.$ppicture.addClass("ppicture-800"),this.__initCount(),this.bindEvent()},__initCount:function(){this.totalCount=this.$ul.find(">li").length,this.totalCount==this.maxShowNumber?this.totalPage=1:this.totalPage=parseInt(this.totalCount/this.maxShowNumber)+1},bindEvent:function(){var t=this;this.$button_open.on("click",function(){$("html, body").css("overflow","hidden"),t.$ppicture.show()}),this.$button_close.on("click",function(){$("html, body").css("overflow","auto"),t.$ppicture.hide()}),this.$ul.on("click","li",function(){var e=$(this),i=parseInt(e.attr("data-index"));t.showWithIndex(i)}),this.$button_up.on("click",function(){return!(t.currentIndex<=1)&&void(1==t.windowIndex?t.gotoPrevPage():t.showWithIndex(t.currentIndex-1))}),this.$button_down.on("click",function(){return!(t.currentIndex>=t.totalCount)&&void(t.windowIndex==t.maxShowNumber?t.gotoNextPage():t.showWithIndex(t.currentIndex+1))})},renderPicture:function(t){if(t&&t instanceof Array&&t.length>0){t[0]&&t[0].src&&$("#winpic").attr("src",t[0].src);for(var e="",i=0;i<t.length;i++)e+='<li data-index="'+(i+1)+'"><a href="javascript:;"><img src="'+t[i].src+'" alt="'+(t[i].name||"")+'"></a></li>';this.$ul.empty().append(e),this.__initCount(),this.showWithIndex(1)}},showWithIndex:function(t){var e=this.$ul.find("li").eq(t-1);this.currentIndex=t,this.getWindowIndex(),this.setCheckImage(),this.showBigImage(e.find("img").first().attr("src"))},gotoNextPage:function(){return!(this.page>=this.totalPage)&&(this.$ul.css("top","-="+110*this.maxShowNumber),this.page++,void this.showFirstImage())},gotoPrevPage:function(){return!(this.page<=1)&&(this.$ul.css("top","+="+110*this.maxShowNumber),this.page--,void this.showMaxImage())},showBigImage:function(t){var e=this.$ppicture.find(".pp-right img.show"),i=this.$ppicture.find(".pp-right img.normal"),n=this.getBigPicSrc(t);e.removeClass("show").addClass("normal"),i.attr("src",n).removeClass("normal").addClass("show")},getBigPicSrc:function(t){var e=this.$ppicture.hasClass("ppicture-800")?800:650,i=t.replace(/w\d{2,3}\.(jpg|png|jpeg)$/gi,"w"+e+".$1");return i},getWindowIndex:function(){return this.windowIndex=this.currentIndex-(this.page-1)*this.maxShowNumber},setCheckImage:function(){this.$div_checked.css("top",110*(this.windowIndex-1)+10)},showFirstImage:function(){this.currentIndex=(this.page-1)*this.maxShowNumber+1;var t=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(t.find("img").first().attr("src"))},showMaxImage:function(){this.currentIndex=this.page*this.maxShowNumber;var t=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(t.find("img").first().attr("src"))}},1==PDUtil.isRunInNode()&&module&&module.exports?module.exports=t:(window.components||(window.components={}),window.components.BigPicture=t)}(),function(t){function e(t){this.data={all:[]},this.$shownZengpin=$(".gift-container-list"),this.$showPopDialog=$("#gift-status-txt"),this.$container=$("#container_zengpin"),this.$box=$("#div_zengpin"),this.$box_kxzp=$("#div_kexuan"),t&&this.init()}e.prototype={constructor:e,init:function(){try{this.getAllData(),this.renderDom(),this.bindEvent(),this.showZengpin(),$(".active-several-container").removeClass("hidden")}catch(e){t.warn("必选赠品组件=> init方法错误 ---------->"),t.warn(e)}},renderDom:function(e){try{for(var i=this,n=window.$p,a=e||this.data.all,o="",s=0;s<a.length;s++){var r=a[s],c=n.promotion.goodsDetailUrl&&n.promotion.goodsDetailUrl[r.code]||"/product/"+r.code+".html";o+='<div class="gift-item-box" data-title="'+r.goodsName+'"><a class="item-text" target="_blank" href="'+c+'"><img class="item-big-img" src="'+r.path+'" alt=""></a></div>'}o.length>0&&i.$shownZengpin.html(o),i.$showPopDialog.text("赠完为止"),$(".uparrow-u").hide()}catch(e){t.warn("必选赠品组件=> renderDom方法错误 --------->"),t.warn(e)}},bindEvent:function(){var t=this,e=0,i=40,n="";t.$shownZengpin.on("mouseenter",".gift-item-box",function(t){n=$(this).attr("data-title"),$("body").append('<div id="mytitle" >'+n+'<div class="arrow-wrap pop-tips"><div class="up-arrow pre-arrow"></div><div class="up-arrow curr-arrow"></div></div></div>'),$("#mytitle").css({left:$(this).offset().left+e+"px",top:$(this).offset().top+i+"px","z-index":2}).show()}).on("mouseleave",".gift-item-box",function(){$("#mytitle").remove()})},getAllData:function(){var t=window.$p.processBXZPNeedShowList();return this.data.all=t,t},showZengpin:function(){this.$container.removeClass("hidden")}},window.components||(window.components={}),window.components.BiXuanZengPin=e}(window.PDUtil),function(t){function e(t){this.data={},this.$container=$("#container_buygroup"),this.$button_buy=$(".button-pay"),this.$button_notice=$("#dhtz"),this.$button_shoppingcart=$("#jrgwc"),this.$span_stock=$("#span_stock_dec"),this.$box_ewm=$("#box_ewm"),t&&this.init()}e.prototype={constructor:e,init:function(){try{if(this.$button_buy.attr("latag","latag_pc_detail_orderimmediately_"+window.code),this.$button_shoppingcart.attr("latag","latag_pc_detail_addshopcart_"+window.code),this.__initEWM(),this.__initSNCode(),this.__initPrice(),this.__initBuyButton(),this.__initShoppingcartButton(),this.updateGouMaiZiXunUrl(),window.$p.processNoticeButton().isShow){if(""===window.$p.baseInfo.price)return;var e=$p.nowNumber;if($p.activity&&$p.activity.ShanGou){var i=$p.activity.ShanGou;if(e>i.yystartNumber&&e<i.yyendNumber)return}this.__initNoticeButton()}this.bindEvent()}catch(e){t.warn("BuyGroup组件=> init方法错误------------>"),t.warn(e)}},__initBuyButton:function(){this.refreshBuyButton()},refreshBuyButton:function(){var t=window.$p.processBuyButton(),e=t.isDisabled?null:r;this.setBuyButton(t.showText,t.isDisabled,e),t.isShow&&this.$button_buy.show(),!t.isDisabled&&window.$p.baseInfo.stock>0&&this.$span_stock.text("有库存"),window.$p.baseInfo.waterLevelDesc&&this.$span_stock.text(window.$p.baseInfo.waterLevelDesc)},__initNoticeButton:function(){__detailConfig.getApiPath("sendsms");this.$button_notice=$('<div class="button button-pay" id="button_dhtz">到货通知</div>'),$("#ljgm").after(this.$button_notice),this.$button_notice.on("click",function(){function e(){var i=/^1[3456789]\d{9}$/,n=window.$.trim($("#notice_phoneNumber").val()),a=t.getCookie("leid");return""==n?(layer.msg("请输入手机号"),!1):i.test(n)?void window.$p.jsonpNoticeSendSms({mobile:n,leId:a,vcode:$("#dhnotice-code").val()},function(t){if(1==t.success){var i=119;$("#notice_getVerificationCode").off("click").text("已发送(120)");var n=setInterval(function(){$("#notice_getVerificationCode").text("已发送("+i+")"),0==i&&($("#notice_getVerificationCode").off("click").on("click",e).text("获取验证码"),clearInterval(n)),i--},1e3)}else layer.msg(t.resultMsg)}):(layer.msg("请输正确的手机号"),!1)}layer.open({type:1,skin:"dhtz-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["550px","557px"],move:!1,content:$("#promotion_popdialog_wrap")}),$("#promotion_popdialog_wrap .goBack").off("click").on("click",function(){layer.closeAll()}),$("#clear_phonenum_btn").off("click").on("click",function(){$("#notice_phoneNumber").val("")}),$("#dhnotice-img").off("click").on("click",function(){$("#dhnotice-img").attr("src",__detailConfig.getApiPath("imgValidUrl")+"?ss="+(new Date).valueOf())}),$("#dhnotice-img").attr("src",__detailConfig.getApiPath("imgValidUrl")),$("#notice_getVerificationCode").off("click").on("click",e);var i=1;$("#notice_savePhoneNumber").off("click").on("click",function(){if(0!=i){i=0;var e=window.$.trim($("#notice_verificationCode").val());if(""==e)return i=1,void layer.msg("请输入验证码");var n=window.$.trim($("#notice_phoneNumber").val()),a=window.passport.cookie?window.passport.cookie.loginName:"",o=window.passport.cookie?window.passport.cookie.lenovoId:"",s=t.getCookie("leid");window.$p.jsonpNoticeSave({productCode:code,activityType:window.$p.baseInfo.activityType,clientType:"PC",linkAddress:window.location.href,phone:n,smsCode:e,lenovoAccount:a,lenovoID:o,leID:s,mallName:"联想官网"},function(t){1==t.success?($("#notice_phoneNumber").val(""),$("#dhnotice-code").val(""),$("#notice_verificationCode").val(""),layer.closeAll(),i=1,layer.msg("订阅成功")):(i=1,layer.msg(t.resultMsg))},function(){i=1,layer.msg("系统繁忙")})}})})},__initShoppingcartButton:function(){var t=window.$p.processAddCartButton();t.isShow&&(this.$button_shoppingcart.off("click"),this.setAddCartButtonClickHandler().show())},__initPrice:function(){var t=window.$p.processShowPrice(),e=window.$p.baseInfo.virtualPrice;window.$p.baseInfo.isIntegral?n({virtualPrice:e,price:t.showText}):i(t.showText)},__initEWM:function(){var t=!1,e='<div id="box_ewm" class="ewm_tk"><img class="bottom_ewm" src="'+window.$p.ewmImageSrc+'" /><div class="triangle"></div><div class="ewm_title">联想客户端</div>';window.$p.baseInfo.appPrice<window.$p.baseInfo.showPrice&&(t=!0),e+="</div>",this.$container.find("div.detail_con").append(e),this.$box_ewm=$("#box_ewm"),t&&this.$box_ewm.show()},__initSNCode:function(){var t=this;$("#checkSNcode_bt").on("click",function(){t.checkSNCode()}),$("#checkSNcode_box .goBack").on("click",function(){layer.closeAll(),$("#SNcode").val("")})},bindEvent:function(){var t=this,e=$("#buy_number");$("#reduce_buy_number").on("click",function(){var i=parseInt(e.val());return!(i-1<=0)&&(e.val(--i),void(window.$p.baseInfo.isIntegral?t.updatePrice(window.$p.virtualCalcPrice()):t.updatePrice(window.$p.calcPrice())))}),$("#add_buy_number").on("click",function(){var i=parseInt(e.val());return i+1>window.$p.baseInfo.stock?(layer.msg("库存不足！"),!1):i+1>window.$p.baseInfo.gmsl?(layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),!1):(e.val(++i),void(window.$p.baseInfo.isIntegral?t.updatePrice(window.$p.virtualCalcPrice()):t.updatePrice(window.$p.calcPrice())))}),e.on("change",function(){var i=parseInt(e.val());/^\d$/.test(e.val())||e.val(i),isNaN(i)||i<=0?(e.val(1),window.$p.baseInfo.isIntegral?t.updatePrice(window.$p.virtualCalcPrice()):t.updatePrice(window.$p.calcPrice())):i>window.$p.baseInfo.stock?(window.$p.baseInfo.gmsl>window.$p.baseInfo.stock?(e.val(window.$p.baseInfo.stock||1),layer.msg("库存不足！")):(e.val(window.$p.baseInfo.gmsl),layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个")),window.$p.baseInfo.isIntegral?t.updatePrice(window.$p.virtualCalcPrice()):t.updatePrice(window.$p.calcPrice())):i>window.$p.baseInfo.gmsl?(e.val(window.$p.baseInfo.gmsl),window.$p.baseInfo.isIntegral?t.updatePrice(window.$p.virtualCalcPrice()):t.updatePrice(window.$p.calcPrice()),layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个")):window.$p.baseInfo.isIntegral?t.updatePrice(window.$p.virtualCalcPrice()):t.updatePrice(window.$p.calcPrice())}),this.$container.find("div.detail_con div#ewm_icon").on("mouseover",function(){$("#box_ewm").show()}).on("mouseleave",function(){$("#box_ewm").hide()}),$(document).on("click",function(){t.$box_ewm.is(":visible")&&t.$box_ewm.hide()}),window.$p.baseInfo.stock>0&&window.$p.baseInfo.logistics?$(".delivery-info-wrap").on("mouseenter",function(){$(this).append('<div id="delivery_pop_box" ><span class="del-info">'+JSON.parse($p.baseInfo.logistics).infoes+'</span><div class="arrow-wrap del-tips"><div class="up-arrow pre-arrow"></div><div class="up-arrow curr-arrow"></div></div></div>'),$("#delivery_pop_box").show()}).on("mouseleave",function(){$("#delivery_pop_box").remove()}).show():$(".delivery-info-wrap").hide()},updateGouMaiZiXunUrl:function(){var t=$(".sort .sort-list > ul> li").eq(1).find("ul >a").eq(0),e=$(".shop_rightbar .shop_pointer .V_icon_cont .V_user_infor dd:eq(0) a:eq(0)"),i=$("#J_MUIMallbar .ns_parentBox .ns_mbar-qq .ns_mbar-inner a:eq(0)");$("#btn_gmzx").on("click",function(){try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid?ga("send","event","Tk_ProductDetail_PC","购买咨询",window.code):ga("send","event","ProductDetail_PC","购买咨询",window.code)}catch(t){PDUtil.warn("点击详情页购买咨询按钮 监控方法错误 ------------->"),PDUtil.warn(t)}}),t&&1==t.length?$("#a_gmzx").attr("href",t.attr("href")):e&&1==e.length?$("#a_gmzx").attr("href",e.attr("href")):$("#a_gmzx").attr("href",i.attr("href"))},updatePrice:function(t){if($p.baseInfo.isShowPrice)if($p.baseInfo.isIntegral)n(t);else{if(0==$p.baseInfo.showPrice)return;i(t)}},getBuyNumber:function(){var t=$("#buy_number").val();return/^[1-9][0-9]*$/.test(t)?parseInt(t):1},setBuyButton:function(t,e,i,n){var a={event:"click",type:"replace"};return n=window.$.extend(a,n||{}),(0==$p.baseInfo.isShowPrice&&$p.baseInfo.mallType==PDUtil.mallTypeMapping.lenovoShop.code||""===$p.baseInfo.price&&!$p.baseInfo.isIntegral)&&(t="立即咨询"),this.$button_buy.text(t||"立即购买").attr("title",t||"立即购买"),e?this.$button_buy.addClass("button-gray").off("click"):(this.$button_buy.removeClass("button-gray"),i&&"function"==typeof i&&("replace"==n.type?this.$button_buy.off(n.event).on(n.event,i):this.$button_buy.on(n.event,i))),"已售罄"===t?(this.$button_buy.attr("latag","latag_pc_detail_soldout_"+window.code),$("#ljgm, #button_dhtz").css({border:"none"})):"立即预约"===t?this.$button_buy.attr("latag","latag_pc_detail_appointment_"+window.code):"商品已下架"===t?(this.$button_buy.attr("latag","latag_pc_detail_offshelf_"+window.code),$("#ljgm, #button_dhtz").css({border:"none"})):"立即购买"===t?this.$button_buy.attr("latag","latag_pc_detail_orderimmediately_"+window.code):"敬请期待"===t?$("#ljgm, #button_dhtz").css({border:"none"}):"预约未开始"===t?$("#ljgm, #button_dhtz").css({border:"none"}):"已预约"===t&&$("#ljgm, #button_dhtz").css({border:"none"}),this.$button_buy},setAddCartButtonClickHandler:function(t){return this.setButtonClickHandler(this.$button_shoppingcart,t,c)},setBuyButtonClickHandler:function(t){return this.setButtonClickHandler(this.$button_buy,t,r)},setButtonClickHandler:function(t,e,i){return e?t.on("click",e):t.on("click",i),t},ljgm:function(){r()},jrgwc:function(){c()},tcjrgwc:function(e){window.$p.jsonpAddItemToCart({terminal:window.$p.terminal,itemtype:3,gcodes:window.code+","+e,opgcode:"",servicecode:"",icount:1,personalization:decodeURIComponent(window.$p.components.srdz.getdz())},function(e){0==e.rc?window.location.href=__detailConfig.getApiPath("gwc")+"getcart.jhtml?plat="+window.$p.terminal:(t.warn("additemtocart return data fail"+e.rc),layer.msg("套餐加入购物车失败，请稍后再试"))})},ljyy:function(){if(window.passport&&window.passport.isLogin())window.$p.jsonpShangouYuyue(function(t){if("0"==t.rc){window.$p.components.title.reservationId=t.reservationId;var e=/^0{0,1}(13[0-9]|15[7-9]|153|156|18[7-9])[0-9]{8}$/.test(window.passport.cookie.loginName);e?$("#wsgyy_tel").val(window.passport.cookie.loginName):$("#wsgyy_modify").hide();var i=$p.activity.ShanGou.startTimeStr+" 开始抢购, 请留下您的手机号码, 商品开抢前联想会第一时间通知您!";$("#ljyy-pop-txt").text(i),layer.open({type:1,skin:"ljyy-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["550px","557px"],move:!1,content:$("#ljyy-layer-wrap")}),window.$p.components.buygroup.setBuyButton("已预约",!0)}else layer.msg(t.msg||"系统正忙, 请稍后再试!")});else try{window.passport.show(),passport.loginRedirect=window.location.href}catch(e){t.warn("立即预约失败。。"),t.warn(e)}},ljgm_sg:function(){var e=window.$p;try{window.passport&&window.passport.isLogin()?2==e.baseInfo.activityType&&(!e.activity.ShanGou||1!=e.activity.ShanGou.type&&2!=e.activity.ShanGou.type||e.jsonpIsBookUser(function(t){0==t.rc?1==t.status?e.components.buygroup.sg_queue():layer.msg("你未预约该商品，没有购买资格!"):layer.msg("系统正忙，请稍后再试!")},function(){layer.msg("系统正忙，请稍后再试!")})):(window.passport.show(),passport.loginRedirect=window.location.href)}catch(e){t.warn("BuyGroup组件=> ljgm_sg方法错误 ------------->"),t.warn(e),layer.msg(t.errorMessage.busy)}},sg_queue:function(){$p.jsonpShangouQueue({gcode:window.code},function(t){var e=1,i="",n="",a={shopId:window.shopId,terminal:$p.terminal,itemtype:0,gcodes:window.code,icount:$p.components.buygroup.getBuyNumber(),opgcode:$p.components.kxzp.getKXZP().join()||"",servicecode:$p.components.service.getSelectedService().join(",")||"",personalization:decodeURIComponent($p.components.srdz.getdz())||"",sn:$p.baseInfo.SNCode||""};if(t.success)a=$.extend(a,{token:t.data.token,tokenTimeStamp:t.data.timestamp}),$p.jsonpShangouGwc(a,function(t){if(t.success)if(0==t.rc){$p.components.buygroup.data.token=t.data.token,$p.components.buygroup.data.tokenTimeStamp=t.data.timestamp;var e=$(".installment-dropdown-wrapper.checked"),i=e.attr("data-paytype")+"|"+e.attr("data-cycle"),a="";""!==e.find(".installment-info span").text()&&e.find(".installment-info span").text().indexOf("选择分期")===-1&&(a=encodeURIComponent(i)),window.location.href=__detailConfig.getApiPath("sgjs")+"shangou/index.html?ss="+(new Date).getMilliseconds()+"&shopId="+window.shopId+"&terminal="+$p.terminal+"&token="+$p.components.buygroup.data.token+"&tokenTimeStamp="+$p.components.buygroup.data.tokenTimeStamp+"&defaultPayment="+a}else layer.msg("系统正忙，请稍后再试!");else 20002==t.rc?(n="您已经超过购买次数！",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()})):layer.msg("系统正忙，请稍后再试!")});else if(20002==t.rc)n="手慢啦！商品补货中，待会再来看看吧！",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()});else if(20003==t.rc){n="当前排队"+t.data+"人，";var o=setInterval(function(){++e,i="您已等待"+e+"秒",$("#notice_sg_times").text(i)},1e3),s=setInterval(function(){$p.jsonpShangouQueue({gcode:window.code},function(t){0==t.rc?(clearTimeout(s),clearTimeout(o),a=$.extend(a,{token:t.data.token,tokenTimeStamp:t.data.timestamp}),$p.jsonpShangouGwc(a,function(t){if(t.success){if(0==t.rc){$p.components.buygroup.data.token=t.data.token,$p.components.buygroup.data.tokenTimeStamp=t.data.timestamp;var e=$(".installment-dropdown-wrapper.checked"),i=e.attr("data-paytype")+"|"+e.attr("data-cycle"),a="";""!==e.find(".installment-info span").text()&&e.find(".installment-info span").text().indexOf("选择分期")===-1&&(a=encodeURIComponent(i)),window.location.href=__detailConfig.getApiPath("sgjs")+"shangou/index.html?ss="+(new Date).getMilliseconds()+"&shopId="+window.shopId+"&terminal="+$p.terminal+"&token="+$p.components.buygroup.data.token+"&tokenTimeStamp="+$p.components.buygroup.data.tokenTimeStamp+"&defaultPayment="+a}}else 20002==t.rc?(n="您已经超过购买次数！",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()})):layer.msg("系统正忙，请稍后再试!")})):20002==t.rc?(clearTimeout(o),clearTimeout(s),n="手慢啦！商品补货中，待会再来看看吧！",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()})):20003==t.rc?(n="当前排队"+t.data+"人，",$("#notice_sg_msg").text(n)):layer.msg("系统正忙，请稍后再试!")})},5e3);$("#notice_sg_msg").text(n),$("#notice_sg_times").text("1s"),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide(),clearTimeout(o),clearTimeout(s)})}else 20004==t.rc&&(n="商品火爆，请稍后再试",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()}))})},checkSNCode:function(){var t=window.$p;layer.open({type:1,id:"sndialog",skin:"sn-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["550px","594px"],move:!1,content:$("#checkSNcode_box")});var e=$("#checkSNcode_bt").text("验证中..."),i=$("#SNcode").val();return i?void t.ajaxCheckSNCode(i,function(i){var n=i.data;if(200==i.status&&1==n.res){if(e.text("确定"),t.baseInfo.SNCode=n&&n.info&&n.info.machineNo,!t.baseInfo.SNCode)return layer.msg("SN码验证失败"),e.text("确定"),!1;r()}else e.text("确定"),layer.msg(n&&n.info&&n.info.errorMessage||"SN码验证失败")},function(){return layer.msg("系统繁忙，请稍后再试！"),!1}):($("#checkSNcode_bt").text("确定"),!1)}};var i=function(t){var e=parseFloat(t);isNaN(e)?($("#price_unit").text(""),$("#span_price").text(t)):(passport.isLogin()?$("#price_des").text("会员价："):$("#price_des").text("商城价："),$("#span_price").text(parseFloat(e)))},n=function(t){if(!$p.baseInfo.isShowPrice&&"暂无报价"==t.price)return void $("#span_price").text(t.price);var e=parseFloat(t.price);0!==e&&$("#span_price").text(parseFloat(e)),"V_0"==$p.baseInfo.virtualAreaCode&&$("#span_price_integral").text(t.virtualPrice).parent().removeClass("hidden"),"V_1"==$p.baseInfo.virtualAreaCode&&$("#span_price_virtual").text(t.virtualPrice).parent().removeClass("hidden"),e&&""!=$.trim(e)||($(".sign-prc-group").hide(),$(".price-sign-virtual").hide(),$(".sign-prc-group-virtual").css("margin",0),$(".price-sign-integral").hide())},a=function(){for(var t=[code],e=window.$p.components.tjxj.data.selectedArray,i=0;i<e.length;i++)t.push(e[i].code);return t},o=function(){try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid?(ga("ec:addProduct",{id:window.code,name:window.$p.baseInfo.name,variant:$("#div_product_dec").text(),price:window.$p.baseInfo.price,quantity:$("#buy_number").val()}),ga("ec:setAction","checkout",{step:1}),ga("send","event","Tk_ProductDetail_PC","ProductCheckoutStep_1",window.code)):(ga("ec:addProduct",{id:window.code,name:window.$p.baseInfo.name,price:window.$p.baseInfo.price,quantity:$("#buy_number").val()}),ga("ec:setAction","checkout",{step:1}),ga("send","event","ProductDetail_PC","ProductCheckoutStep_1",window.code))}catch(t){PDUtil.warn("点击详情页立即购买按钮 监控方法错误 ------------->"),PDUtil.warn(t)}try{var e=window.$p;if(!e.components.guige.isExist_gg())return!1;var i=a(),n=i.length>1?2:0,o=__detailConfig.getApiPath("gwc")+"directbuy.jhtml",s=window.location.search.substr(1),r=o+"?ss="+(new Date).getMilliseconds()+"&itemtype="+n+"&gcodes="+i.join(",")+"&icount="+$("#buy_number").val()+"&opgcode="+e.components.kxzp.getKXZP().join()+"&servicecode="+e.components.service.getSelectedService().join()+"&customids=&sharecode="+e.shareCode+"&terminal="+e.terminal;""!==s&&(r+="&"+s);var c=$(".installment-dropdown-wrapper.checked"),d=c.attr("data-paytype")+"|"+c.attr("data-cycle");if(""!==c.find(".installment-info span").text()&&c.find(".installment-info span").text().indexOf("选择分期")===-1&&(r+="&defaultPayment="+encodeURIComponent(d)),e.baseInfo.isPersonalPositions&&e.baseInfo.isPersonalPositions.length>0&&(r+="&personalization="+e.components.srdz.getdz()),90==e.baseInfo.buOwner){if(""==$("#showpop").val())return layer.msg("请选择号码"),!1;var l=$("div.de_info_section1 .de_sec_main").eq(1).find("span.active").attr("code");r+="&phoneServiceNumber="+$("#showpop").val()+"&dpackageId="+l,r+="&goodsId="+$("#showpop").attr("goodsid")}if(e.isLcodeProduct()){var p=e.baseInfo.LCode;r+="&kcode="+p}if(e.baseInfo.isNeedSN&&e.baseInfo.isService){if(!e.baseInfo.SNCode)return e.components.buygroup&&e.components.buygroup.checkSNCode(),!1;r+="&SN="+e.baseInfo.SNCode}switch(e.baseInfo.salesType){case"5":r="custommade.html?code="+e.gcode}if(window.passport&&window.passport.isLogin()){if(e.baseInfo.isHasPersonal&&!e.baseInfo.isIntegral&&window.passport.cookie&&90==window.passport.cookie.groupCode&&1===window.shopId&&!window.$p.components.srdz.isSelcetedSrdz())return layer.msg("亲！您需要选择私人订制信息才能购买！"),!1;e.activity&&1==e.baseInfo.activityType&&1==e.activity.purchaseLimiting&&e.jsonpIsTuangouUser(function(t){0==t.rc&&1==e.activity.hasPurchased&&(e.components.buygroup.setBuyButton("您已参团",!0),layer.msg("您已参团"))}),e.baseInfo.isIntegral?"V_0"==e.baseInfo.virtualAreaCode?e.jsonpgetIntegral(null,function(t){if(0==t.ret){var i=t.data&&t.data.effectiveValue||0;i<e.baseInfo.virtualPrice*$("#buy_number").val()?layer.msg("亲，您的消费积分当前余额不够,请赶快去赚取！"):(r+="&virtualCoinType=0",window.location.href=r)}else layer.msg("系统繁忙，请稍后重试！")}):"V_1"==e.baseInfo.virtualAreaCode?e.jsonpgetIntegral({type:1},function(t){if(0==t.ret){var i=t.data||0;i<e.baseInfo.virtualPrice*$("#buy_number").val()?layer.msg("亲，您的乐豆当前余额不够,请赶快去赚取！"):(r+="&virtualCoinType=1",window.location.href=r)}else layer.msg("系统繁忙，请稍后重试！")}):window.location.href=r:(2==e.baseInfo.activityType||3==e.baseInfo.activityType)&&e.activity&&e.nowNumber>e.activity.buyStartTime&&e.nowNumber<e.activity.buyEndTime?e.components.buygroup.sg_queue():window.location.href=r}else window.passport.show(),e.baseInfo.isIntegral&&(r=window.location.href),r=window.location.href,window.passport.loginRedirect=r}catch(e){t.warn("BuyGroup组件=> ljgm方法错误 ------------->"),t.warn(e),layer.msg(t.errorMessage.busy)}},s=function(){try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid?(ga("ec:addProduct",{id:window.code,name:window.$p.baseInfo.name,variant:$("#div_product_dec").text(),price:window.$p.baseInfo.price,quantity:$("#buy_number").val()}),ga("ec:setAction","add"),ga("send","event","Tk_ProductDetail_PC","ProductAddToCart",window.code)):(ga("ec:addProduct",{id:window.code,name:window.$p.baseInfo.name,price:window.$p.baseInfo.price,quantity:$("#buy_number").val()}),ga("ec:setAction","add"),ga("send","event","ProductDetail_PC","ProductAddToCart",window.code))}catch(t){PDUtil.warn("点击详情页加入购物车按钮 监控方法错误 ------------->"),PDUtil.warn(t)}try{if(!window.$p.components.guige.isExist_gg())return!1;var e=a(),i=e.length>1?2:0;window.$p.jsonpAddItemToCart({terminal:window.$p.terminal,itemtype:i,gcodes:e.join(","),opgcode:window.$p.components.kxzp.getKXZP().join(),servicecode:window.$p.components.service.getSelectedService().join(),personalization:decodeURIComponent(window.$p.components.srdz.getdz()),icount:$("#buy_number").val()},function(e){0==e.rc?window.location.href=__detailConfig.getApiPath("gwc")+"getcart.jhtml?plat="+window.$p.terminal:20047==e.rc?(t.warn("additemtocart return data fail"+e.rc),layer.msg("超出商品购买数量限制")):(t.warn("additemtocart return data fail"+e.rc),layer.msg("加入购物车失败，请稍后再试"))},function(t){$("#modal-layer .img-tips").attr("src","../series/product/xiaoxin/images/line-up-tips.jpg"),window.$p.showTips()})}catch(e){t.warn("BuyGroup组件=> jrgwc方法错误 ------------->"),t.warn(e),layer.msg(t.errorMessage.busy)}},r=function(){o()},c=function(){s()};window.components||(window.components={}),window.components.BuyGroup=e}(window.PDUtil),function(t){function e(e){var i=this;this.data={totalCount:0,totalPage:0,showTabIndex:0,comments:[],labels:[],pageIndex:1,productId:0,level:0,label:"",commentIsShow:!1,firstClick:!0,onlyThis:2},this.declarationUrl="/series/product/xiaoxin/images/pcmianzeshengming.jpg",this.thinkDriverDownloadUrl="http://think.lenovo.com.cn/support/driver/mainpage.aspx#ThinkPad?from=shop",this.lenovoDriverDounloadUrl="http://support.lenovo.com.cn/lenovo/wsi/Modules/NewDrive.aspx?from=shop",this.thinkBXPZUrl="http://think.lenovo.com.cn/service/warranty/repairDeploy.html?from=shop",this.lenovoBXPZUrl="http://support.lenovo.com.cn/lenovo/wsi/Modules/Newbxpz.aspx?from=shop",this.thinkFWWDUrl="http://think.lenovo.com.cn/stations/TSStation.aspx?from=shop",this.lenovoFWWDUrl="http://support.lenovo.com.cn/lenovo/wsi/station/servicestation/default.aspx?from=shop",this.$container=$("#container_info"),this.$box_pagebar=$("#pj_number > ul"),this.$box_information=$("#box_information"),this.$box_configuration=$("#box_configuration"),this.$box_comment=$("#box_comment"),this.$box_service=$("#box_service"),this.$commentList=$("#assess_item"),this.$commentLabels=$("#comment_labels"),this.$button_showthis=$("#comment_only_show_this"),this.$containerTabs=$("#container_info .ul-box li"),this.data.commentIsShow=this.$containerTabs.eq(0).is(":hidden")&&this.$containerTabs.eq(1).is(":hidden"),"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid?this.$containerTabs.on("click",function(){return"tab_ljgm"!==$(this).attr("id")&&void $("html, body").scrollTop($("#container_info").offset().top)}):this.$containerTabs.on("click",function(){return"tab_ljgm"!==$(this).attr("id")&&void(0===$(document).scrollTop()||$(".detail-all-tab-container").hasClass("fixed")?$("html, body").scrollTop($("#container_info").offset().top-102):$("html, body").scrollTop($("#container_info").offset().top-52))});try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid&&$("#container_info").on("click",".ul-box li",function(t){ga("send","event","Tk_ProductDetail_PC","Tk_content_"+$(t.target).text(),"")})}catch(t){PDUtil.warn("点击 商品详情、配置信息、商品评价、服务支持等按钮时触发 监控方法错误 ------------->"),PDUtil.warn(t)}try{this.pagebar=new components.PageBar(this.$box_pagebar),this.pagebar.data.onPageChange=function(t){i.data.pageIndex=i.pagebar.data.pageIndex=t,i.renderComment()}}catch(e){t.warn("Configuration组件 初始错误 ---------->"),t.warn(e)}e&&this.init()}e.prototype={constructor:e,init:function(){var e=this;try{e.bindEvent()}catch(e){t.warn("Configuration.bindEvent error"),t.warn(e)}e.data.commentIsShow&&setTimeout(function(){e.renderComment()},1e3),setTimeout(function(){try{window.$p.components.configInfo.renderCommentNumber()}catch(e){t.warn("Configuration.renderCommentNumber error"),t.warn(e)}},1e3),e.adddeclaration(),
e.addCustomerService()},bindEvent:function(){var t=0,e=this;this.$box_comment.find(".assess_tRight .assess_btn").eq(0).addClass("checked");var i=this.$container.find("ul.ul-box li.checked");i&&1==i.length&&(this.data.showTabIndex=parseInt(i.attr("data-index")),2==this.data.showTabIndex&&e.$container.find(".info-box").eq(2).show());var n=0,a=$(".detail-all-tab-container");$(window).on("scroll",function(){n=$(".tab-fix-helper").offset().top-$(window).scrollTop(),"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid?($("#container_info .detail-all-tab-container").css({top:0}),n<=52?a.addClass("fixed").parent().find(".tab-fix-helper").css({"margin-top":"52px"}):a.removeClass("fixed").parent().find(".tab-fix-helper").css({"margin-top":"0"})):n<=102?a.addClass("fixed").parent().find(".tab-fix-helper").css({"margin-top":"52px"}):a.removeClass("fixed").parent().find(".tab-fix-helper").css({"margin-top":"0"})}),$("#total-evaluate-count").on("click",function(){$(".ul-box li").each(function(){$(this).text().indexOf("评价")!==-1&&$(this).trigger("click")})}),$("#tab_ljgm span").on("mouseenter",function(){$(this).attr("title",""),$(".tab-detail-infobox").remove(),e.addPopDetailBox(),$(".tab-detail-infobox").slideDown(),$(".tabtxt").ellipsis({row:2,onlyFullWords:!0,position:"tail"})}).on("mouseleave",function(){$(".tab-detail-infobox").slideUp()}),this.$container.find("ul.ul-box li").on("click",function(){var t=$(this),i=t.attr("data-index");return e.data.showTabIndex!=i&&"tab_ljgm"!==t.attr("id")&&(e.data.firstClick&&!e.data.commentIsShow&&(e.renderComment(),e.data.firstClick=!1),t.siblings(".checked").removeClass("checked"),t.addClass("checked"),e.$container.find(".info-box").eq(e.data.showTabIndex).hide(),e.data.showTabIndex=i,e.$container.find(".info-box").eq(i).show(),void 0)}),this.$box_comment.find(".assess_tRight .assess_btn").on("click",function(){var t=$(this),i=t.attr("data-level");return e.data.level!=i&&(t.siblings(".checked").removeClass("checked"),t.addClass("checked"),e.data.level=i,e.data.label="",e.data.pageIndex=e.pagebar.data.pageIndex=1,$("#comment_labels div.mjyx_info").removeClass("mjyx_active"),e.renderComment(),void 0)}),this.$box_comment.find("#comment_labels").on("click",".mjyx_info",function(t){var i=$(this),n=i;if(i.hasClass("mjyx_info")||(n=i.parent()),n.hasClass("mjyx_active"))return!1;$("#comment_labels div.mjyx_active").removeClass("mjyx_active"),n.addClass("mjyx_active");var a=n.find("span:first");return e.data.label=a.text(),e.data.pageIndex=e.pagebar.data.pageIndex=1,e.renderComment(),!1}),this.$button_showthis.on("click",function(){e.data.pageIndex=e.pagebar.data.pageIndex=1,e.data.label="",e.$button_showthis.get(0).checked?e.data.onlyThis=1:e.data.onlyThis=2,e.renderComment(),e.renderCommentNumber()}),e.$commentList.on("click","div.assess_picBtn",function(){var e=$(this),i=t=parseInt(e.attr("data-index")||0);e.toggle(function(){e.addClass("borderActive").siblings().removeClass("borderActive"),e.find("span").slideDown(1e3),e.siblings().find("span").hide(),e.parent().parent().find("ul.assess_ul li").eq(i).show().siblings().hide(),e.parent().parent().find(".btn_div").show()},function(){e.parent().parent().find("ul.assess_ul li").eq(i).hide(),$(".btn_div").hide(),$(".assess_picBtn").eq(i).removeClass("borderActive"),$(".assess_picBtn").eq(i).find("span").hide()}),e.trigger("click")}),e.$commentList.on("click","ul.assess_ul li",function(){var t=$(this);t.hide();var e=t.index();$(".btn_div").hide(),$(".assess_picBtn").eq(e).removeClass("borderActive"),$(".assess_picBtn").eq(e).find("span").hide()}),e.$commentList.on("click","span.assess_btnRight",function(){var e=$(this).parent().parent().parent(),i=e.find(".assess_ul li").length;t++,t>=i&&(t=0);var n=e.find(".assess_picBtn").eq(t);n.addClass("borderActive").siblings().removeClass("borderActive"),n.find("span").show(),n.siblings().find("span").hide(),e.find(".assess_ul li").eq(t).show().siblings().hide()}),e.$commentList.on("click","span.assess_btnLeft",function(){var e=$(this).parent().parent().parent(),i=e.find(".assess_ul li").length;t<=0&&(t=i),t--;var n=e.find(".assess_picBtn").eq(t);n.addClass("borderActive").siblings().removeClass("borderActive"),n.find("span").show(),n.siblings().find("span").hide(),e.find(".assess_ul li").eq(t).show().siblings().hide()})},addPopDetailBox:function(){var t="x"+$("#buy_number").val();"V_0"==$p.baseInfo.virtualAreaCode?t="+"+$p.baseInfo.virtualPrice+"积分":"V_1"==$p.baseInfo.virtualAreaCode&&(t="+"+$p.baseInfo.virtualPrice+"乐豆");var e='<div class="tab-detail-infobox" style="display: none;"><div class="arrow-wrap tab-pop-arrow"><div class="up-arrow pre-arrow"></div><div class="up-arrow curr-arrow"></div></div><div class="tab-img-wrap"><img id="tabimg" src="'+$p.baseInfo.thumbnailsURL.path+'" alt=""></div><div class="tab-detail-txt"><p class="tabtxt">'+$p.baseInfo.name+'</p><div class="tab-price-info"><span class="tab-price-sign">¥</span><span id="tabprice">'+$p.baseInfo.price+'</span><span id="tabcount">'+t+"</span></div></div></div>";$("#tab_ljgm").append(e)},getShowCodes:function(){var e=this;try{if(e.$button_showthis[0].checked)return window.code;var i=[],n=$p.components.guige.data||{};return $.each(n,function(t,e){i.push(e)}),i.join(",")}catch(e){return t.warn("configuration.getShowCodes报错了-------->"),t.warn(e),window.code}},adddeclaration:function(){try{var e=this.$box_information.find("div.images");e.find("img").length>0&&e.append('<p><img src="'+this.declarationUrl+'"></p>')}catch(e){t.warn("configuration组件=> adddeclaration方法报错了-------->"),t.warn(e)}},renderComment:function(){var t=window.$p,e=this;e.data.productId=window.code,e.$commentList.html('<div style="text-align:center;">加载评论...</div>');var i=e.getShowCodes();t.jsonpEvaluateList(i,e.data.pageIndex,e.data.productId,e.data.level,e.data.label,e.data.onlyThis,function(t){e.renderCommentLables(t),e.callback_commentListSuccess(t,e.data.level,e.data.label)},function(){e.$commentList.html("<p style='text-align:center; padding-top:24px; color:#999;'>暂无评价内容.</p>")})},renderCommentLables:function(e){var i=window.$p.components.configInfo;i.$commentLabels.empty();try{var n="";if(e.data.lables.length>0&&"000000"==e.code){for(var a=0;a<e.data.lables.length;a++)n+='<div class="mjyx_info"><span>'+e.data.lables[a].lable+"</span>（"+e.data.lables[a].num+"）</div>";window.$p.components.configInfo.$commentLabels.append(n).parent().show()}else window.$p.components.configInfo.$commentLabels.parent().hide()}catch(e){t.warn("configuration.renderCommentLables 中 $p.jsonpEvaluateList回调函数 错误 --------------->"),t.warn(e)}},renderCommentNumber:function(){var e=this,i=$("#total-evaluate-count").html("0"),n=$("#comment_level_haoping").html("0"),a=$("#comment_level_zhongping").html("0"),o=$("#comment_level_chaping").html("0"),s=$("#comment_level_pic").html("0"),r=$("#comment_level_zhuip").html("0"),c=$("#comment_haopinglv").html("100%"),d=e.getShowCodes();window.$p.jsonpEvaluateRate(d,function(d){try{if("000000"==d.code){e=window.$p.components.configInfo;var d=e.commentNumberObj=d.data;i.html(d.total),$("#comment_level_all").html(d.total),n.html(d.good),a.html(d.medium),o.html(d.bad),s.html(d.picnum),r.html(d.isAdd||0);var l=d.favorRate;if(0!==d.total){c.html(l+"%");var p=e.$container.find("ul.ul-box li:eq(2)");p.text("商品评价("+d.total+")")}}}catch(e){t.warn("configuration.renderCommentNumber 中 $p.jsonpEvaluateNumber回调函数 错误 --------------->"),t.warn(e)}})},callback_commentListSuccess:function(e,i,n){function a(t){if(t){var e=t.indexOf(null);e>-1&&(t.splice(e,1),a(t))}}function o(t,e){var i=e.find(".addcomment-pic-list li").removeClass("borderActive").eq(t).addClass("borderActive");e.find(".addcomment-pic-list li .sanjiao2").hide(),i.find(".sanjiao2").show();var n=i.find("img").attr("data-big");e.find(".playBigPic2").show().find(".playBigPic2Img").html('<img src="'+n+'" />')}try{var s=this;if(s.$commentList.empty(),"000000"==e.code&&e.data.comment.length>0){var r=this.data.comments=e.data.comment;if(e.data.comment[e.data.comment.length-1].totalPage<=1)s.data.totalCount=s.pagebar.data.totalCount=r.length-1;else if(s.commentNumberObj){s.data.totalCount=s.pagebar.data.totalCount=10*e.data.comment[e.data.comment.length-1].totalPage}else s.data.totalCount=s.pagebar.data.totalCount=10*e.data.comment[e.data.comment.length-1].totalPage;s.pagebar.render();for(var c=0;c<r.length-1;c++){var d="";d+='<div class="assess_item"> ',d+=' \t<div class="assess_left">',d+=' \t\t<div class="assess_name">'+r[c].euser+"</div>",d+='\t\t<span class="start_bg start'+r[c].escore+'"></span>',d+=' \t\t<div class="assess_time">'+r[c].etime+"</div>",d+=" \t</div>",d+=' \t<div class="assess_right">',d+='\t\t<div class="mjyx_detailDiv">';var l=r[c].lableAndScore.labels;if(l&&l.length>0)for(var p=0;p<l.length;p++)d+='\t\t\t<div class="mjyx_detail">'+l[p]+"</div>";if(d+="\t\t</div>",d+=' \t\t<div class="assess_con">'+r[c].edesc+"</div>",r[c].eimagelist.length>0){d+=' \t\t<div class="assess_picDiv">',d+=' \t\t\t<div class="assess_picTop">';for(var u=0;u<r[c].eimagelist.length;u++)d+=' \t\t\t\t<div class="assess_picBtn" data-index="'+u+'"><img src='+r[c].eimagelist[u].miniUrl+'><span class="sanjiao"></span></div>';d+="\t\t\t</div>",d+="\t\t\t<div>",d+='\t\t\t\t<ul class="assess_ul">';for(var p=0;p<r[c].eimagelist.length;p++)d+="\t\t\t\t\t<li><img src="+r[c].eimagelist[p].picUrl+"></li>";d+="\t\t\t\t</ul>",d+='\t\t\t\t<div class="btn_div">',d+='\t\t\t\t\t<span class="assess_btnLeft"></span>',d+='\t\t\t\t\t<span class="assess_btnRight"></span>',d+="\t\t\t\t</div>",d+="\t\t\t</div>",d+="\t\t</div>"}if(r[c].reply.length>0)for(var h=0;h<r[c].reply.length;h++)d+='\t\t<div class="service_info">',d+='\t\t\t<div class="info_top">'+r[c].reply[h].retname+r[c].reply[h].rettime+"</div>",d+="\t\t\t<div>"+r[c].reply[h].retdesc+"</div>",d+="\t\t</div>";if(r[c].addList&&r[c].addList.length)for(var m=0,f=r[c].addList.length;m<f;m++){var v="【追评】",g=r[c].totalDay;if(isNaN(g)||(g=+g,v=g>=1?"【购买"+g+"天后追评】":"【购买当天追评】"),d+='                                <div class="addcomment">                                    <p class="addcomment-days">'+v+'</p>                                    <p class="addcomment-con">'+r[c].addList[m].addDesc+"</p>",r[c].addList[m].addEimagelist&&r[c].addList[m].addEimagelist.length){d+='<div class="addcomment-pic"><ul class="addcomment-pic-list">';for(var w=0,b=r[c].addList[m].addEimagelist,y=b.length;w<y;w++)d+='<li data-index="'+w+'"><span class="sanjiao2"></span><img src="'+b[w].miniUrl+'" data-big="'+b[w].picUrl+'" data-date="'+b[w].uploadtime+'" /></li>';d+='</ul><div style="clear:both;height:0;"></div>',d+='<div class="playBigPic2"><span class="assess_btnLeft"></span><span class="assess_btnRight"></span><div class="playBigPic2Img"></div></div>',d+="</div>"}var _=r[c].addList[m].addReturnList;if(a(_),_&&_.length)for(var w=0,y=_.length;w<y;w++)d+='<div class="addcomment-ap">',d+='<p class="addcomment-ap-tit">'+_[w].retname+" "+_[w].rettime+"</p>",d+='<p class="addcomment-ap-con">'+_[w].retdesc+"</p>",d+="</div>";d+="</div>"}d+="\t</div>",d+="</div>",this.$commentList.append(d),$(".addcomment-pic-list li").off().on("click",function(){o($(this).index(),$(this).closest(".addcomment"))}),$(".playBigPic2Img").off().on("click",function(){$(this).closest(".playBigPic2").hide().prevAll(".addcomment-pic-list").find("li").removeClass("borderActive").find(".sanjiao2").hide()}),$(".playBigPic2 .assess_btnLeft,.playBigPic2 .assess_btnRight").off().on("click",function(){var t=$(this).closest(".addcomment"),e=t.find(".addcomment-pic-list li").length,i=t.find(".addcomment-pic-list li.borderActive").index();$(this).hasClass("assess_btnLeft")?i--:i++,i>=e&&(i=0),i<0&&(i=e-1),o(i,t)})}}else"000000"==e.code&&0==e.data.comment.length?this.$commentList.html('<div style="text-align:center;">没有更多评论了</div>'):this.$box_comment.html("<p style='text-align:center; padding-top:24px; color:#999;'>暂无评价内容.</p>")}catch(e){t.warn("configuration.callback_commentListSuccess 错误 --------------->"),t.warn(e)}},addCustomerService:function(){var t=this,e=new RegExp(/^(84|85|86)$/),i=new RegExp(/^(09|48|A4|76|74|47|04|35|B3|84|85|86)$/),n=$p.baseInfo.productGroupNo;i.test(n)&&($("#container_info .ul-box li[data-index=3]").show(),e.test(n)?($("#box_service .self-service .self-service-qd").attr("href",t.thinkDriverDownloadUrl),$("#box_service .self-service .self-service-cx").attr("href",t.thinkBXPZUrl)):($("#box_service .self-service .self-service-qd").attr("href",t.lenovoDriverDounloadUrl),$("#box_service .self-service .self-service-cx").attr("href",t.lenovoBXPZUrl)))}},window.components||(window.components={}),window.components.Configuration=e}(window.PDUtil),function(){function t(t){this.data={couponObj:{}},this.$couponCard=$(".coupon-cart"),t&&this.init()}t.prototype={constructor:t,init:function(){this.eventBindCoupon(),this.getCoupon()},getCoupon:function(t){var e=this;$.ajax({type:"GET",url:__detailConfig.getApiPath("coupon")+"couponnew/api/coupon/getCouponsByProduct.jhtm?ss="+(new Date).getMilliseconds(),data:{categoryCode:$p.baseInfo.categoryCode,faId:faid,goodsCode:code,getTerminal:$p.terminal,shopId:window.shopId},dataType:"jsonp",jsonp:"callbackparam",timeout:5e3,success:function(t){if(1==t.success){if(t.t){e.data.couponObj.couponArr=[];for(var i=0;i<t.t.length;i++)e.data.couponObj.couponArr.push({id:t.t[i].id,token:t.t[i].token||"",name:t.t[i].name,timeType:t.t[i].timeType,fromtime:t.t[i].fromtime,totime:t.t[i].totime,description:t.t[i].description,terminal:t.t[i].terminal,amount:t.t[i].amount});if(passport&&passport.isLogin()){if(e.data.couponObj.couponArr&&e.data.couponObj.couponArr.length>0){for(var n=0,a=[];n<e.data.couponObj.couponArr.length;n++)a.push(e.data.couponObj.couponArr[n].id);e.isCouponOwned(a,e.renderCoupon)}}else e.renderCoupon()}}else console.log("优惠券信息接口异常！")},error:function(t){pd.log("the ajax is fail"+t.responseText+"--"+t.statusText,"warn")},complete:function(){t&&"function"==typeof t&&t()}})},isCouponOwned:function(t,e){var i=this;t&&$.ajax({type:"GET",url:__detailConfig.getApiPath("coupon")+"couponnew/api/coupon/getUserIshaveTheCoupon.jhtm?ss="+(new Date).getMilliseconds(),data:{salesCouponIds:t.join(","),shopId:window.shopId},dataType:"jsonp",jsonp:"callbackparam",timeout:5e3,success:function(t){if(1==t.success){if(t.t)for(var e=0;e<t.t.length;e++)for(var n=0;n<i.data.couponObj.couponArr.length;n++)i.data.couponObj.couponArr[n].id===t.t[e].id&&(i.data.couponObj.couponArr[n].has=t.t[e].has)}else console.log("优惠券查询接口异常！")},error:function(t){console.log("the ajax is fail"+t.responseText+"--"+t.statusText,"warn")},complete:function(){e&&"function"==typeof e&&e()}})},getApplyCoupon:function(t,e,i){var n=function(t,e){layer.msg(t,{time:e})};t&&$.ajax({type:"GET",url:__detailConfig.getApiPath("coupon")+"couponnew/api/coupon/bindForOnce.jhtm?ss="+(new Date).getMilliseconds(),data:{token:t.token,salesCouponId:t.id,getTerminal:$p.terminal,shopId:window.shopId},dataType:"jsonp",jsonp:"callbackparam",timeout:5e3,success:function(t){1==t.success?(n("领取成功!",2e3),e.off().text("已领取").css("cursor","default").parents(".coupon-card-li").addClass("taken")):10008===t.resultCode?n(".white此券已领完!",2e3):10006===t.resultCode?n("此券已过期!",2e3):console.log("领取优惠券接口异常！")},error:function(t){pd.log("the ajax is fail"+t.responseText+"--"+t.statusText,"warn")},complete:function(){i&&"function"==typeof i&&i()}})},renderCoupon:function(){var t=$p.components.couponCard,e=t.data.couponObj.couponArr,i="",n="",a="";if(e&&e.length>0){e.length>3&&$("#coupon_ellipsis").show();for(var o=0;o<e.length;o++)o<3&&(i+='<span class="coupon-content">'+parseInt(e[o].amount)+"优惠券</span>"),passport&&passport.isLogin()&&e[o].has?n+='<li class="coupon-card-li taken"><div class="coupon-card-box"><div class="coupon-item-left"><span class="coupon-item-title" title="'+e[o].name+'">'+e[o].name+'</span><div class="card-evaluate-wrap"><span class="card-eva-txt">有效期:</span><span class="card-eva-date">'+e[o].fromtime+"-"+e[o].totime+'</span></div><div class="card-evaluate-wrap"><span class="card-eva-txt">适用平台:</span><span class="card-eva-info" title="'+e[o].terminal+'">'+e[o].terminal+'</span></div></div><div class="coupon-item-right"><div class="coupon-item-prc-box"><i class="currency-sign">¥</i><span class="coupon-price">'+parseInt(e[o].amount)+'</span></div><div class="coupon-taken-btn">已领取</div></div></div></li>':a+='<li class="coupon-card-li"><div class="coupon-card-box"><div class="coupon-item-left"><span class="coupon-item-title" title="'+e[o].name+'">'+e[o].name+'</span><div class="card-evaluate-wrap"><span class="card-eva-txt">有效期:</span><span class="card-eva-date">'+e[o].fromtime+"-"+e[o].totime+'</span></div><div class="card-evaluate-wrap"><span class="card-eva-txt">适用平台:</span><span class="card-eva-info" title="'+e[o].terminal+'">'+e[o].terminal+'</span></div></div><div class="coupon-item-right"><div class="coupon-item-prc-box"><i class="currency-sign">¥</i><span class="coupon-price">'+parseInt(e[o].amount)+'</span></div><div class="coupon-taken-btn" data-token="'+e[o].token+'" data-id="'+e[o].id+'">立即领取</div></div></div></li>';$(".coupon-cart").append(i),$("#couponbox").show(),a&&$(".coupon-card-ul").html(a),n&&$(".coupon-card-ul").append(n)}$p.eventBindCoupon()},eventBindCoupon:function(){var t=this;$(".coupon-cart").on("click",function(){layer.open({type:1,skin:"coupon-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["550px","629px"],move:!1,content:$("#coupon-layer-wrap")}),$(".coupon-taken-btn").off("click").on("click",function(){var e={id:$(this).attr("data-id"),token:$(this).attr("data-token")},i=$(this);if(passport&&passport.isLogin()){if("已领取"===$(this).text())return;t.getApplyCoupon.call(this,e,i)}else $p.baseInfo.isIntegral&&(url=window.location.href),layer.closeAll(),passport.show(),passport.loginRedirect=window.location.href}),$(".coupon-item-title").ellipsis({row:1,onlyFullWords:!0,position:"tail"}),$(".card-eva-info").ellipsis({row:1,onlyFullWords:!0,position:"tail"})}),$(".coupon-popup-title img").off("click").on("click",function(){layer.closeAll()}),$(".couponlink").attr("href",__detailConfig.getApiPath("coupon")+"lenovo/saleCoupons.jhtm")}},window.components||(window.components={}),window.components.couponCard=t}(),function(){function t(t){this.$container=$("#container_guige"),this.data={},this.spec=[],this.SKUResult={},this.curSpec=[],t&&this.init()}t.prototype={constructor:t,init:function(){var t=this;window.$p.baseInfo.isHasSpec&&$p.jsonpGuige(function(e){if(0==e.status){var i=e.result||{};t.data=t.formatData(i)||{},t.spec=t.formatSpec(i)||[],t.curSpec=t.formatCurSpec(window.code,i)||[]}t.buildGuigeDom(),t.$spans=$("#guige li span"),t.initSKU(t.data),$("#guige li span").each(function(){var e=$(this),i=e.attr("title");t.SKUResult[i]||e.attr("disabled","disabled").addClass(t.constStr.classNameDisabled)}).on("click",function(){var e=$(this);if("disabled"===e.attr("disabled"))return!1;e.toggleClass(t.constStr.classNameActive).siblings().removeClass(t.constStr.classNameActive);var i=$("#guige .active");if(i.length){var n=[];i.each(function(){n.push($(this).attr("title"))}),n.length>1&&(n=n.sort(function(t,e){return t.localeCompare(e)}));var a=n.length;$("#guige li span").not(i).not(e).each(function(){var e=$(this).siblings(".active"),i=[];if(e.length)for(var o=e.attr("title"),s=0;s<a;s++)n[s]!=o&&i.push(n[s]);else i=n.concat();i=i.concat($(this).attr("title")),i.length>1&&(i=i.sort(function(t,e){return t.localeCompare(e)})),t.SKUResult[i.join(";")]?$(this).removeClass(t.constStr.classNameDisabled).removeAttr("disabled"):$(this).attr("disabled","disabled").addClass(t.constStr.classNameDisabled).removeClass(t.constStr.classNameActive)})}else $("#guige li span").each(function(){t.SKUResult[$(this).attr("title")]?$(this).removeClass("down_line").removeAttr("disabled"):$(this).attr("disabled","disabled").addClass(t.constStr.classNameDisabled).removeClass(t.constStr.classNameActive)});t._forwardUrl()});for(var n=0,a=t.curSpec.length;n<a;n++)$("#guige li span").each(function(){$(this).attr("title")===t.curSpec[n]&&$(this).trigger("click")})})},constStr:{classNameActive:"active",classNameDisabled:"down_line"},_forwardUrl:function(){var t,e=this,i=[],n="",a=$("#guige span."+e.constStr.classNameActive);$.each(a,function(t,e){i.push($(e).attr("title"))}),n=i.sort(function(t,e){return t.localeCompare(e)}).join(";"),t="undefined"!==e.data[n]?e.data[n]:"",t!=window.code&&t&&(window.location.href=t+".html"+window.location.search)},buildGuigeDom:function(){var t=this,e=t.spec.length,i=t.curSpec.length;if(0==e)return t;for(var n='<ul id="guige">',a=0;a<e;a++){var o=t.spec[a];for(var s in o){n+='<li class="guige-li clearfix" id="guigeitem'+a+'" class="clearfix"><div class="guige-item-title">'+s+'</div><div class="guige-item-detail">';for(var r=0,c=o[s].length;r<c;r++)n+="1"==i?'<span title="'+o[s][r]+'" class="spec-big"><i>'+o[s][r]+"</i></span>":window.$p.pd_getByteLen(o[s][r])>10?'<span title="'+o[s][r]+'" class="spec-big"><i>'+o[s][r]+"</i></span>":'<span title="'+o[s][r]+'" class="spec-mid"><i>'+o[s][r]+"</i></span>";n+="</div></li>"}}return n+="</ul>",t.$container.html(n),$("#guige .guige-item-detail").each(function(){var t=0,e=0;$(this).children("span").each(function(i){return!t||$(this).position().top>e?(e=$(this).position().top,t++,!0):void(3==++t&&($(this).after("<br>"),t=0))})}),$(".spec-big i").ellipsis(),$(".spec-mid i").ellipsis(),t},isExist_gg:function(){var t=this,e=!1;if(t.curSpec instanceof Array){var i=t.curSpec.length;$("#guige span.active").length==i?e=!0:layer.msg("请选择规格")}return e},formatCurSpec:function(t,e){var i=[],n=e[t]||{};return $.each(n,function(t,e){t&&e&&i.push(e)}),i},formatSpec:function(t){var e=[];return $.each(t,function(t,i){var n=0;$.each(i,function(t,i){var a=!1;e[n]||(e[n]={},e[n][t]=[i]);for(var o=0;o<e[n][t].length;o++)e[n][t][o]===i&&(a=!0);a||e[n][t].push(i),n++})}),e},formatData:function(t){var e,i={},n="";return $.each(t,function(t,a){e=[],$.each(a,function(t,i){e.push(i)}),n=e.sort(function(t,e){return t.localeCompare(e)}).join(";"),i[n]=t}),i},initSKU:function(t){var e,i,n=this,a=n.getObjKeys(t);for(e=0;e<a.length;e++){var o=a[e],s=t[o],r=o.split(";");r=r.sort(function(t,e){return t.localeCompare(e)});var c=n.combInArray(r);for(i=0;i<c.length;i++)n.add2SKUResult(c[i],s);n.SKUResult[r.join(";")]=s}},add2SKUResult:function(t,e){var i=this,n=t.join(";");i.SKUResult[n]||(i.SKUResult[n]=e)},combInArray:function(t){var e=this;if(!t||!t.length)return[];for(var i=t.length,n=[],a=1;a<i;a++)for(var o=e.getCombFlags(i,a);o.length;){for(var s=o.shift(),r=[],c=0;c<i;c++)s[c]&&r.push(t[c]);n.push(r)}return n},getCombFlags:function(t,e){if(!e||e<1)return[];var i,n,a,o=[],s=[],r=!0;for(i=0;i<t;i++)s[i]=i<e?1:0;for(o.push(s.concat());r;)for(a=0,i=0;i<t-1;i++){if(1==s[i]&&0==s[i+1]){for(n=0;n<i;n++)s[n]=n<a?1:0;s[i]=0,s[i+1]=1;var c=s.concat();o.push(c),c.slice(-e).join("").indexOf("0")==-1&&(r=!1);break}1==s[i]&&a++}return o},getObjKeys:function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e}},window.components||(window.components={}),window.components.Guige=t}(),function(){function t(t){this.data={all:[]},this.$container=$("#container_hotlist"),this.$box=$("#div_hotlist"),t&&this.init()}t.prototype={constructor:t,init:function(){var t=this;this.getAllData(function(e){t.renderDom(),t.bindEvent(),e&&e.length>0?t.$container.show():t.$container.hide()})},renderDom:function(){var t=this.data.all,e="";if(0==t.length)return!1;for(var i=0;i<t.length&&3!=i;i++){var n=2==i?" noborder":"",a=t[i];e+='<div class="hot_item'+n+'"><a class="hot-item" href="'+a.detailUrl+'" target="_blank" latag="latag_pc_detail_topseller1_'+a.code+'"><img src="'+(a.path||"")+'" class="hot_pic"/><div class="hot_picTitle" title="'+a.name+'">'+a.name+'</div><div class="hot_picDec">'+(a.brief||"")+'</div><div class="hot_picMoney">RMB '+a.price+"</div></a></div>"}e.length>0&&(this.$box.append(e),this.$container.removeClass("hidden"))},bindEvent:function(){},getAllData:function(t){var e=this;$p.loadHostList({},function(i){200==i.status&&(e.data.all=i.data),t&&t(i.data)})}},window.components||(window.components={}),window.components.HotList=t}(),function(){function t(t){this.data={all:[],selectedArray:[]},this.$box=$(".active-several-container"),this.$popDialog=$(".gift-pop-box"),this.$showPopDialog=$("#gift-status-txt"),this.$button_ok=$("#button_checkgifts_ok"),this.$shownZengpin=$(".gift-container-list"),this.$container=$("#container_zengpin"),this.hasChecked=!1,t&&this.init()}var e=window.PDUtil;t.prototype={constructor:t,init:function(){this.getAllData(),this.renderDom(),this.bindEvent(),this.showZengpin(),$(".active-several-container").removeClass("hidden")},renderDom:function(){var t=$p.components.bxzp.data.all,i=this.data.all,n="",a="",o=$("#bixuan-container"),s=$("#kexuan-container");if(t.length>0){o.removeClass("hidden");for(var r=0;r<t.length;r++){var c=t[r];n+='<div class="swiper-slide" data-code="'+c.code+'"><div class="gift-slide-container"><div class="gift-slide-img-box" style="border:none;"><img class="gift-slide-img" title="'+c.goodsName+'" src="'+e.cutPicturePath(c.path,70)+'" /></div><div class="gift-slide-desc"><a target="_blank" href="//'+window.location.host+"/product/"+c.code+'.html"><span>'+c.goodsName+"</span></a></div></div></div>"}}else o.addClass("hidden");if(i.length>0){s.removeClass("hidden");for(var d=0;d<i.length;d++)a+='<div class="swiper-slide kexuan-slide" data-code="'+i[d].code+'"><div class="gift-slide-container"><div class="gift-slide-img-box"><img class="gift-slide-img" title="'+i[d].goodsName+'" src="'+e.cutPicturePath(i[d].path,70)+'" /></div><div class="gift-slide-desc"><a target="_blank" href="//'+window.location.host+"/product/"+i[d].code+'.html"><span>'+i[d].goodsName+"</span></a></div></div></div>"}else s.addClass("hidden");n.length>0&&$("#bixuan-render-box").html(n),a.length>0&&$("#kexuan-render-box").html(a),new e.mySwiper({fid:"#kexuan-container",ul:"#kexuan-render-box",lis:".kexuan-slide",leftBtn:".kexuan-swiperBtn .left",rightBtn:".kexuan-swiperBtn .right",count:6})},bindEvent:function(){var t=this;t.$showPopDialog.on("click",function(){$(".uparrow-u").addClass("changed");var e=$("#gift-status-txt").offset().top-$("#detail_right").offset().top+26;t.$popDialog.css({top:e}).removeClass("hidden"),$(".gift-slide-desc span").ellipsis({row:2,onlyFullWords:!0,position:"tail"})}),$("#detail_right").find(".kexuan-slide").on("click",function(){e.debug("zengpin click-------------->"),e.debug("hasChecked:"+t.hasChecked),e.debug("selectedArray:"+t.data.selectedArray.length);var i=$(this);if(i.hasClass("checked"))i.removeClass("checked"),t.data.selectedArray=e.dropSome(t.data.selectedArray,function(t){return t.code==i.attr("data-code")});else{var n=i.attr("data-code"),a=i.siblings(".checked").removeClass("checked");t.data.selectedArray=e.dropSome(t.data.selectedArray,function(t){return t.code==a.attr("data-code")});var o=e.findFirst(t.data.selectedArray,function(t){return t.code==n});if(!o){var s=e.findFirst(t.data.all,function(t){return t.code==n});t.data.selectedArray.push(s)}i.addClass("checked")}}),t.$button_ok.on("click",function(){e.debug("OK click-------------->"),e.debug("hasChecked:"+t.hasChecked),e.debug("selectedArray:"+t.data.selectedArray.length),$(".uparrow-u").removeClass("changed");var i=$p.components.bxzp,n="";if(t.data.selectedArray.length>0||i.data.all.length>0){t.hasChecked=!0;for(var a=i.data.all.concat(t.data.selectedArray),o=0;o<a.length;o++){var s=a[o],r=$p.promotion.goodsDetailUrl&&$p.promotion.goodsDetailUrl[s.code]||"/product/"+s.code+".html";n+='<div class="gift-item-box"><a class="item-text" target="_blank" href="'+r+'" title="'+s.goodsName+'"><img class="item-big-img" src="'+s.path+'" alt=""></a></div>'}n.length>0&&t.$shownZengpin.html(n),t.closeCheckBox()}else e.debug("用户点击确定，但是没有选择可选赠品"),t.hasChecked=!1,t.$shownZengpin.empty(),t.$showPopDialog.text("选择赠品"),t.closeCheckBox()})},getAllData:function(){var t=$p.processKXZPNeedShowList();return this.data.all=t,t},getKXZP:function(){for(var t=[],e=0;e<this.data.selectedArray.length;e++)t.push(this.data.selectedArray[e].code);return t},closeCheckBox:function(){var t=this;0==t.hasChecked?t.$popDialog.addClass("hidden"):(t.$popDialog.addClass("hidden"),t.$showPopDialog.text("更换赠品"))},showZengpin:function(){this.$container.removeClass("hidden")}},window.components||(window.components={}),window.components.KeXuanZengPin=t}(),function(t){function e(t,e){this.data={totalCount:0,pageSize:10,pageIndex:1,interval:3,onPageChange:e},this.$container=t}e.prototype={constructor:e,render:function(){try{var e=this;if(e.$container.empty(),1==e.data.pageIndex)e.$container.append('<li class="page_btn prev disable"><a href="javascript:;" title="上一页" class="clearfix"><i></i><span>上一页</span></a></li>');else{var i=$('<li class="page_btn prev"><a href="javascript:;" title="上一页" class="clearfix"><i></i><span>上一页</span></a></li>').on("click",function(){try{e.data.onPageChange(e.data.pageIndex-1)}catch(e){t.warn(e)}return!1});e.$container.append(i)}var n=Math.ceil(e.data.totalCount/e.data.pageSize),a=Math.max(1,e.data.pageIndex-e.data.interval),o=Math.min(e.data.pageIndex+e.data.interval,n);e.data.pageIndex<e.data.interval+1&&(o=2*e.data.interval+1>n?n:2*e.data.interval+1),e.data.pageIndex+e.data.interval>n&&(a=n-2*e.data.interval<1?1:n-2*e.data.interval);for(var s=a;s<o+1;s++)if(s==e.data.pageIndex)e.$container.append('<li class="page_num active"><a href="javascript:void(0">'+s+"</a></li>");else{var r=$('<li class="page_num"><a href="javascript:void(0">'+s+"</a></li>").on("click",function(){try{e.data.onPageChange(parseInt($(this).text()))}catch(e){t.warn(e)}return!1});e.$container.append(r)}if(e.data.pageIndex==n||0==e.data.totalCount)e.$container.append('<li class="page_btn next disable"><a href="javascript:;" title="下一页" class="clearfix"><i></i><span>下一页</span></a></li>');else{var c=$('<li class="page_btn next"><a href="javascript:;" title="下一页" class="clearfix"><i></i><span>下一页</span></a></li>').on("click",function(){try{e.data.onPageChange(parseInt(e.data.pageIndex+1))}catch(e){t.warn(e)}return!1});e.$container.append(c)}e.$container.append('<li class="page_total">显示<span>'+((e.data.pageIndex-1)*e.data.pageSize+1)+"</span>-<span>"+(e.data.pageIndex*e.data.pageSize>e.data.totalCount?e.data.totalCount:e.data.pageIndex*e.data.pageSize)+"</span>条，<span>共"+n+"页</span><li>");var d=$('<li class="page_goto">到第<input type="text" value="1"/>页</li>'),l=$('<li class="page_sure"><input type="button" value="确定"/></li>').on("click",function(){try{var i=parseInt(d.find("input").val());if(i>n||i<=0||isNaN(i))return alert("当前一共"+n+"页，请输入正确的页码。"),!1;e.data.onPageChange(i)}catch(e){t.warn(e)}});e.$container.append(d).append(l)}catch(e){t.warn("PageBar组件=> render方法错误 ----------->"),t.warn(e)}}},window.components||(window.components={}),window.components.PageBar=e}(window.PDUtil),function(){function t(t){this.data={initPicList:[]},this.$container=$("#detail_playPicture"),this.$winpic=$("#winpic"),this.$button_left=$("#play_picture_leftbtn"),this.$button_right=$("#play_picture_rightbtn"),this.$div_list=$("#detail_playPicture_list"),this.$ul=$("#detail_playPicture_list ul"),this.maxShowNumber=5,this.currentIndex=1,this.windowIndex=1,this.page=1,this.totalPage=1,this.totalCount=0,t&&this.init()}t.prototype={constructor:t,init:function(){try{this.__initCount(),this.__initGoodPicList()}catch(t){window.PDUtil.debug("轮播图__initCount方法error--------->"),window.PDUtil.warn(t)}this.bindEvent(),this.$container.show(),this.showWithIndex(1)},__initGoodPicList:function(){var t=this;this.$ul.find(" > li > a > img").each(function(){var e=$(this);t.data.initPicList.push({src:e.attr("src"),name:e.attr("alt")})})},__initCount:function(){this.currentIndex=1,this.windowIndex=1,this.page=1,this.totalCount=this.$ul.find(">li").length,this.totalCount==this.maxShowNumber?this.totalPage=1:this.totalPage=parseInt(this.totalCount/this.maxShowNumber)+1,
this.setButtonShow()},setButtonShow:function(){var t=this;t.currentIndex<=1?t.$button_left.css("opacity","0.3").attr("disable","disable"):t.$button_left.css("opacity","1.0").removeAttr("disable"),t.currentIndex>=this.totalCount?t.$button_right.css("opacity","0.3").attr("disable","disable"):t.$button_right.css("opacity","1.0").removeAttr("disable")},bindEvent:function(){var t=this;this.$ul.on("click mouseenter mouseleave","li",function(){try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid&&ga("send","event","Tk_ProductDetail_PC","Tk_palyPicture_click ",parseInt($(this).attr("data-index")))}catch(t){PDUtil.warn("点击id=detail_playPicture_list下li 监控方法错误 ------------->"),PDUtil.warn(t)}var e=$(this);if(e.hasClass("checked"))return!1;var i=parseInt(e.attr("data-index"));t.showWithIndex(i),t.setButtonShow()}),this.$button_left.on("click",function(){try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid&&ga("send","event","Tk_ProductDetail_PC","Tk_palyPicture_prev","")}catch(t){PDUtil.warn("点击如何图片参考左右按钮时触发 监控方法错误 ------------->"),PDUtil.warn(t)}return!(t.currentIndex<=1)&&(1==t.windowIndex?t.gotoPrevPage():t.showWithIndex(t.currentIndex-1),void t.setButtonShow())}),this.$button_right.on("click",function(){try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid&&ga("send","event","Tk_ProductDetail_PC","Tk_palyPicture_next","")}catch(t){PDUtil.warn("点击如何图片参考左右按钮时触发 监控方法错误 ------------->"),PDUtil.warn(t)}return!(t.currentIndex>=t.totalCount)&&(t.windowIndex==t.maxShowNumber?t.gotoNextPage():t.showWithIndex(t.currentIndex+1),void t.setButtonShow())})},renderPicture:function(t){if(t&&t instanceof Array){0==t.length&&(t=this.data.initPicList);for(var e="",i=0;i<t.length;i++)e+='<li data-index="'+(i+1)+'"><a href="javascript:;"><img src="'+t[i].src+'" alt="'+(t[i].name||"")+'"></a></li>';this.$ul.empty().append(e),this.__initCount(),this.showWithIndex(1)}},showWithIndex:function(t){var e=this.$ul.find("li").eq(t-1);this.currentIndex=t,this.getWindowIndex(),this.setCheckImage(),this.showBigImage(e.find("img").first().attr("src"))},gotoNextPage:function(){return!(this.page>=this.totalPage)&&(this.$ul.css("left","-="+96*this.maxShowNumber),this.page++,void this.showFirstImage())},gotoPrevPage:function(){return!(this.page<=1)&&(this.$ul.css("left","+="+96*this.maxShowNumber),this.page--,void this.showMaxImage())},showBigImage:function(t){var e=this.getBigPicSrc(t);return!!e&&void this.$winpic.attr("src",e)},getBigPicSrc:function(t){if(!t)return"";var e=520,i=t.replace(/w\d{2,3}\.(jpg|png|jpeg)$/gi,"w"+e+".$1");return i},getWindowIndex:function(){return this.windowIndex=this.currentIndex-(this.page-1)*this.maxShowNumber},setCheckImage:function(){var t=this;t.$ul.find("li.checked").removeClass("checked"),t.$ul.find("li").eq(t.currentIndex-1).addClass("checked")},showFirstImage:function(){this.currentIndex=(this.page-1)*this.maxShowNumber+1;var t=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(t.find("img").first().attr("src"))},showMaxImage:function(){this.currentIndex=this.page*this.maxShowNumber;var t=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(t.find("img").first().attr("src"))}},1==window.PDUtil.isRunInNode()&&module&&module.exports?module.exports=t:(window.components||(window.components={}),window.components.PlayPicture=t)}(),function(t){function e(t){this.data={},this.firstSingleTxt="",this.secondSingleTxt="",this.$container=$("#container_cuxiao"),this.$activeBar=$(".active-title-box"),this.$labelBox=$("#pro_label_box"),this.$djsBox=$("#count-down-wrap"),this.$djsTxt=$("#countdown-text"),this.$preSellBox=$(".presell-price-detail-wrap"),this.$priceDes=$(".price-desc"),this.$price=$("#span_price"),this.$preSellPrice=$("#presell_price"),this.$nailPrice=$("#nail_price"),this.cashDiscount=0,this.reservationId=0,this.$activeBox=$(".container-active"),this.$activeTitle=$("#active-title"),this.$activePrice=$("#active-price"),this.$countdownText=$("#countdown-text"),this.$djs=$(".djs"),this.$delPriceBox=$(".sign-prc-group-del"),this.$delPrice=$("#span_price-del"),this.$activeWrap=$(".active-several-container"),this.installmentCount=0,t&&this.init()}var i=0,n=0;e.prototype={constructor:e,init:function(){($p.components.kxzp.getAllData().length>0||$p.components.bxzp.getAllData().length>0)&&i++,this.renderDom(),this.setInstallment()},renderDom:function(){var t=this,e=window.$p.baseInfo,a=window.$p.promotion,o=window.$p.activity,s=window.$p.nowNumber;if(a&&(this.setXDLJ(a,s),this.setMJ(a,s)),o&&(this.setXSQG(o,s),this.setShangou(o,s)),this.setPresell(),e.pcPromotion){var r,c=e.pcPromotion.replace(/[\r\n]/g,""),d="",l=[],p="";$.each(c.match(/<p.*?>.*?<\/p>/g),function(t,e){r=e.replace(/<\/?.+?>/g,"").replace(/ /g,"");var n=e.match(/\【(.+?)\】/g),a=e.replace(/\【(.+?)\】/g,"");r&&$.trim(r).length>0&&(n?(n=n.join("").replace(/\【|\】/g,""),0===i&&0===t?p='<div class="down-gap first-single"><div class="delivery-box"><div class="active-item-box"><em class="promotion-label-style">'+(n?n:"")+"</em>"+(a?a:"")+"</div></div></div>":(d+='<div class="down-gap second-single"><div class="delivery-box"><div class="active-item-box"><em class="promotion-label-style">'+(n?n:"")+"</em>"+(a?a:"")+"</div></div></div>",l.push('<em class="promotion-label-style">'+(n?n:"")+"</em>"))):d+='<div class="down-gap"><div class="delivery-box"><div class="active-item-box">'+(a?a:"")+"</div></div></div>")}),0===i?($(p).insertAfter("#container_zengpin"),t.$labelBox.append(l.join("")),$(".active-content-right .container").append(d),t.$activeWrap.removeClass("hidden")):(i++,t.$labelBox.append(l.join("")),$(d).insertBefore($(".prom-expend-show"))),$(".second-single").length>1&&($(".first-single").find(".active-item-box > p").length>=1?(t.firstSingleTxt=$(".first-single").find(".active-item-box > p").html(),$(".first-single").find(".active-item-box > p").ellipsis()):$(".first-single").find(".active-item-box > a").length>=1?(t.firstSingleTxt=$(".first-single").find(".active-item-box > a").html(),$(".first-single").find(".active-item-box > a").ellipsis()):$(".first-single").find(".active-item-box > span").length>=1&&(t.firstSingleTxt=$(".first-single").find(".active-item-box > span").html(),$(".first-single").find(".active-item-box > span").ellipsis()))}e.extensionTerminal&&e.extensionTerminal.indexOf("pc")!==-1&&e.extensionContent&&i++,i&&(this.$container.removeClass("hidden"),this.$activeWrap.removeClass("hidden")),n&&this.$activeBox.show()},setXDLJ:function(e,n){var a=this,o="";e.saleReduction&&n<e.saleReduction.totime&&(n<e.saleReduction.fromtime?o+='<div id="pro_xdlj" class="down-gap hidden"><div><div class="active-item-box"><em class="promotion-label-style">下单立减</em><em class="promotion-content">下单立减'+e.saleReduction.discountAmount+"元，活动开始时间："+e.saleReduction.fromtimeStr+"</em></div></div></div>":(o+='<div id="pro_xdlj" class="down-gap hidden"><div><div class="active-item-box"><em class="promotion-label-style">下单立减</em><em class="promotion-content">下单立减'+e.saleReduction.discountAmount+'元  </em><em id="pro_xdlj_djs"></em></div></div></div>',t.timer(e.saleReduction.totime-n,function(t){$("#pro_xdlj_djs").html("剩余时间  "+t)},function(){window.location=window.location.href})),0!==i?(i++,this.$labelBox.append('<em class="promotion-label-style">下单立减</em>'),$(o).insertAfter(this.$labelBox)):(i++,$(o).insertBefore(this.$labelBox)),$("#pro_xdlj").removeClass("hidden"),a.$activeWrap.removeClass("hidden"))},setMJ:function(e,n){var a=this,o=[];try{if(e.fullReduction&&n>e.fullReduction.fromtime&&n<e.fullReduction.totime){var s='<div id="promotion_mj" class="down-gap hidden"><div class="active-item-box"><em class="promotion-label-style">满减</em>',r=e.fullReduction.fullsetList;if(e.fullReduction&&e.fullReduction.description&&1===JSON.parse(e.fullReduction.description).matchType){if(7===JSON.parse(e.fullReduction.description).discountType){for(var c=0;c<r.length;c++)o.push("满"+r[c].full+"件减"+parseFloat(r[c].reduce)+"元");s+='<em class="promotion-content" title="'+o.join(" ")+'">'+o.join(" ")+"</em>"}else if(10===JSON.parse(e.fullReduction.description).discountType){for(var c=0;c<r.length;c++)o.push("满"+r[c].full+"件打"+(100-parseFloat(r[c].reduce))/10+"折");s+='<em class="promotion-content" title="'+o.join(" ")+'">'+o.join(" ")+"</em>"}}else if(e.fullReduction&&e.fullReduction.description&&2===JSON.parse(e.fullReduction.description).matchType)if(7===JSON.parse(e.fullReduction.description).discountType){for(var c=0;c<r.length;c++)o.push("满"+parseFloat(r[c].full)+"元减"+parseFloat(r[c].reduce)+"元");s+='<em class="promotion-content" title="'+o.join(" ")+'">'+o.join(" ")+"</em>"}else if(10===JSON.parse(e.fullReduction.description).discountType){for(var c=0;c<r.length;c++)o.push("满"+parseFloat(r[c].full)+"元打"+(100-r[c].reduce)/10+"折");s+='<em class="promotion-content" title="'+o.join(" ")+'">'+o.join(" ")+"</em>"}s+="</div></div>",0!==i?(this.$labelBox.append('<em class="promotion-label-style">满减</em>'),$(s).insertAfter(this.$labelBox)):(i++,$(s).insertBefore(this.$labelBox)),$("#promotion_mj").removeClass("hidden"),a.$activeWrap.removeClass("hidden"),$(".promotion-content").ellipsis()}}catch(e){t.warn("促销组件=> setMJ方法错误------------>"),t.warn(e)}},setPresell:function(){function e(){c.loadPresellInfo({},function(e){if(e&&e.success){var n=e.t||{};r.cashDiscount=n.deduction,i(n)}else t.warn("获取预售信息失败")})}function i(i){if($.isEmptyObject(i))$("#presell-adv-txt").show();else{if(1!=i.disabled)return!1;if(i.terminalname&&i.terminalname.indexOf("PC")<0)return c.components.buygroup&&c.components.buygroup.setBuyButton("商品不在该平台预售",!0),!1;if(r.$preSellBox.removeClass("hidden"),1==i.presellway&&(i.deposit=c.baseInfo.price),r.$price.text(i.deposit),i.activitystarttime_date=new Date(i.activitystarttime.replace(/-/g,"/")),i.activityendtime_date=new Date(i.activityendtime.replace(/-/g,"/")),i.presellstarttime_date=new Date(i.presellstarttime.replace(/-/g,"/")),i.currentdatetime_date=new Date(i.currenttime.replace(/-/g,"/")),i.currentdatetime_date<i.presellstarttime_date)i.process=1,r.$activeTitle.text("预售").show(),a(i),r.$djsBox.removeClass("hidden"),r.$preSellBox.hide(),r.$priceDes.text("预售价"),r.$price.text("待发布");else if(i.currentdatetime_date>=i.presellstarttime_date&&i.currentdatetime_date<i.activityendtime_date){if(i.process=2,c.baseInfo.stock<=0)return r.$priceDes.text("定金"),r.$price.text(parseFloat(i.deposit)),r.$preSellPrice.text(parseFloat(c.baseInfo.price)),0==i.deduction?r.$nailPrice.text(0):r.$nailPrice.text(parseFloat(c.baseInfo.price-i.deduction)),c.components.buygroup.setBuyButtonClickHandler(),t.timer(i.activityendtime_date-i.currentdatetime_date,function(t){r.$djsTxt.text("距支付定金开始还有:"),r.$djs.text(t)},function(){r.$djsTxt.text(""),r.$djs.text(""),e()}),r.$djsBox.removeClass("hidden"),c.components.buygroup.setBuyButton("已售罄",!0),!1;o(i),r.$djsBox.removeClass("hidden"),r.$priceDes.text("定金"),r.$price.text(parseFloat(i.deposit)),r.$preSellPrice.text(parseFloat(c.baseInfo.price)),0==i.deduction?r.$nailPrice.text(0):r.$nailPrice.text(parseFloat(c.baseInfo.price-i.deduction))}else i.process=3,s(i)}}function a(i){c.components.buygroup.setBuyButton("敬请期待",!0),t.timer(i.presellstarttime_date-i.currentdatetime_date,function(t){r.$djsTxt.text("距支付定金开始还有:"),r.$djs.text(t)},function(){r.$djs.text(""),e()})}function o(i){var n=1==i.presellway?"支付全款":"支付定金";c.components.buygroup.setBuyButton(n,!1).off("click"),c.components.buygroup.setBuyButtonClickHandler();var a=PDUtil.formatShortDate(i.activityendtime)+" - "+PDUtil.formatShortDate(i.tailpaymentday);$("#lasttime_nailpay").text("("+a+")"),t.timer(i.activityendtime_date-i.currentdatetime_date,function(t){r.$djsTxt.text("距离预售结束还有:"),r.$djs.text(t)},function(){r.$djsTxt.text(""),r.$djs.text(""),e()}),1===i.presellway?$(".presell-cash-discount").addClass("hidden"):($("#pre-cash-dis").text("可抵现金"+parseFloat(r.cashDiscount)+"元"),$(".presell-cash-discount").removeClass("hidden")),r.$preSellBox.show()}function s(){c.components.buygroup.setBuyButton("预售结束",!0),r.$priceDes.text("会员价"),r.$price.text(c.baseInfo.price),r.$preSellBox.addClass("hidden"),$(".presell-cash-discount").addClass("hidden"),r.$activeBar.addClass("hidden")}var r=this,c=window.$p;if(2!=c.baseInfo.salesType)return!1;if(1!=c.baseInfo.marketable)return!1;n++,r.$activeTitle.text("预售").show();$("#promotion_presell"),$("#promotion_presell span.des");e()},setXSQG:function(e,i){function a(){window.$p.loadAllProductionInfo(function(){o(window.$p.activity.flushSaleJson)},function(){layer.msg("暂时无法获取活动信息， 请刷新页面重试")})}function o(e){"IN"==e.status?(s.$countdownText.text("距结束还剩: "),window.$p.components.buygroup.refreshBuyButton(),t.timer(e.totime-i,function(t){s.$djs.text(t)},function(){a()}),$(".price-desc").text("秒杀价"),$("#active-price").hide(),s.$djsBox.removeClass("hidden"),s.$delPrice.text($p.baseInfo.basePrice),s.$delPriceBox.removeClass("hidden")):"BEFORE"==e.status?(window.$p.components.buygroup.refreshBuyButton(),s.$countdownText.text("距开始还剩: "),$("#active-price").html("秒杀价   ¥"+$p.activity.discountPrice).show(),t.timer(e.fromtime-i,function(t){s.$djs.text(t)},function(){a()}),$("#button_dhtz").hide(),s.$djsBox.removeClass("hidden")):(s.$activeBox.hide(),window.$p.baseInfo.showPrice=window.$p.baseInfo.price,window.$p.components.buygroup.updatePrice(window.$p.baseInfo.price),window.$p.components.buygroup.refreshBuyButton(),window.$p.baseInfo.stock>0&&(window.$p.components.buygroup.$button_shoppingcart.off("click"),window.$p.components.buygroup.setAddCartButtonClickHandler().show()))}var s=this;return"3"==window.$p.baseInfo.activityType&&((!window.$p.activity||!window.$p.activity.flushSaleJson||"AFTER"!=window.$p.activity.flushSaleJson.status)&&(s.$activeTitle.text("限时").show(),n++,void o(e.flushSaleJson)))},setShangou:function(){function e(){window.$p.loadAllProductionInfo(function(){if(isNaN(window.$p.baseInfo.showPrice))window.location.reload();else{window.$p.components.buygroup.updatePrice(window.$p.baseInfo.showPrice);var t=$p.nowNumber,e=$p.activity.ShanGou;t>e.yystartNumber&&t<e.yyendNumber&&$("#button_dhtz").hide(),i()}},function(){alert("暂时无法获取活动信息， 请刷新页面重试!")})}function i(){var i=window.$p;if(null==i.activity||"null"==i.activity)return s.hide(),void i.components.buygroup.setBuyButton("闪购已结束",!0);var n=i.activity.ShanGou,a=i.nowNumber;switch(n.type){case 0:a<n.startNumber?(o.$activeTitle.text("秒杀").show(),o.$activePrice.html("秒杀价   ¥"+i.activity.discountPrice).show(),o.$countdownText.text("距开始还剩: "),i.components.buygroup.setBuyButton("敬请期待",!0),t.timer(n.startNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),$("#button_dhtz").hide()):a>n.startNumber&&a<n.endNumber?(o.$activeTitle.text("秒杀").show(),$(".price-desc").text("秒杀价"),o.$countdownText.text("距结束还剩: "),i.baseInfo.stock>0?i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm):i.components.buygroup.setBuyButton("已售罄",!0),t.timer(n.endNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden")):(s.hide(),i.components.buygroup.setBuyButton("闪购已结束",!0));break;case 1:a<n.yystartNumber?(o.$activeTitle.text("秒杀").show(),$("#active-price").html("秒杀价   ¥"+i.activity.discountPrice).show(),o.$countdownText.text("距离预约开始时间: "),t.timer(n.yystartNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),i.components.buygroup.setBuyButton("预约未开始",!0),$("#button_dhtz").hide()):a>=n.yystartNumber&&a<=n.yyendNumber?window.passport&&passport.isLogin()?($(".price-desc").text("秒杀价"),o.$activeTitle.text("秒杀").show(),o.$countdownText.text("距离预约结束时间: "),t.timer(n.yyendNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),i.jsonpIsBookUser(function(t){"0"==t.rc&&"1"==t.status?i.components.buygroup.setBuyButton("已预约",!0):i.components.buygroup.setBuyButton("立即预约",!1,i.components.buygroup.ljyy)})):($(".price-desc").text("秒杀价"),o.$activeTitle.text("秒杀").show(),o.$countdownText.text("距离预约结束时间: "),t.timer(n.yyendNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),i.components.buygroup.setBuyButton("立即预约",!1,i.components.buygroup.ljyy)):a>n.yyendNumber&&a<n.startNumber?($(".price-desc").text("秒杀价"),o.$activeTitle.text("秒杀").show(),o.$countdownText.text("距离抢购开始时间: "),t.timer(n.startNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),$(".qianggou-time-group").removeClass("hidden"),$("#qianggou-time").text(n.endTimeStr),i.components.buygroup.setBuyButton("敬请期待",!0),$("#button_dhtz").hide()):a>n.startNumber&&a<n.endNumber?($(".price-desc").text("秒杀价"),o.$activeTitle.text("秒杀").show(),o.$countdownText.text("距离秒杀结束时间: "),t.timer(n.endNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),i.baseInfo.stock>0?i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm_sg):i.components.buygroup.setBuyButton("已售罄",!0)):(s.hide(),i.components.buygroup.setBuyButton("闪购已结束",!0));break;case 2:a<n.yystartNumber?(o.$activeTitle.text("秒杀").show(),o.$activePrice.html("秒杀价   ¥"+i.activity.discountPrice).show(),o.$countdownText.text("距离预约开始时间: "),i.components.buygroup.setBuyButton("预约未开始",!0),t.timer(n.yystartNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),$("#button_dhtz").hide()):a>n.yystartNumber&&a<n.yyendNumber?(o.$activeTitle.text("秒杀").show(),$(".price-desc").text("秒杀价"),o.$countdownText.text("距离预约结束时间: "),window.passport&&passport.isLogin()?i.jsonpIsBookUser(function(t){"0"==t.rc?"1"==t.status?i.components.buygroup.setBuyButton("已预约",!0):i.components.buygroup.setBuyButton("立即预约",!1,i.components.buygroup.ljyy):alert("抱歉，您没有预约！")}):i.components.buygroup.setBuyButton("立即预约",!1,i.components.buygroup.ljyy),t.timer(n.yyendNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden")):a>n.yyendNumber&&a<n.startNumber?(o.$activeTitle.text("秒杀").show(),o.$countdownText.text("距离抢购开始时间: "),t.timer(n.startNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),$(".price-desc").text("秒杀价"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),$(".qianggou-time-group").removeClass("hidden"),$("#qianggou-time").text(n.endTimeStr),i.components.buygroup.setBuyButton("敬请期待",!0),$("#button_dhtz").hide()):a>n.startNumber&&a<n.fyyStartNumber?window.passport&&passport.isLogin()?i.jsonpIsBookUser(function(s){"0"==s.rc?"1"==s.status?(o.$activeTitle.text("秒杀").show(),o.$countdownText.text("距离秒杀结束时间: "),t.timer(n.endNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),$(".price-desc").text("秒杀价"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),i.baseInfo.stock>0?i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm):i.components.buygroup.setBuyButton("已售罄",!0)):($(".price-desc").text("秒杀价"),o.$activeTitle.text("秒杀").show(),o.$countdownText.text("距离抢购开始时间: "),t.timer(n.fyyStartNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),$(".qianggou-time-group").removeClass("hidden"),$("#qianggou-time").text(n.endTimeStr),i.components.buygroup.setBuyButton("敬请期待",!0),$("#button_dhtz").hide(),t.debug("用户没有预约")):(r.html("非预约闪购开始时间: "+n.fyyStartTimeStr),c.html(""),i.components.buygroup.setBuyButton("敬请期待",!0),t.debug("用户没有预约"))}):($(".price-desc").text("秒杀价"),o.$activeTitle.text("秒杀").show(),o.$countdownText.text("闪购结束时间: "),t.timer(n.endNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),i.baseInfo.stock>0?i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm):(i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm),$("#button_dhtz").hide())):a>n.fyyStartNumber&&a<n.endNumber?(o.$activeTitle.text("秒杀").show(),o.$countdownText.text("距离抢购结束时间: "),t.timer(n.endNumber-a,function(t){o.$djs.text(t)},function(){e()}),o.$djsBox.removeClass("hidden"),$(".price-desc").text("秒杀价"),o.$delPrice.text(i.baseInfo.basePrice),o.$delPriceBox.removeClass("hidden"),i.baseInfo.stock>0?i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm):i.components.buygroup.setBuyButton("已售罄",!0)):(s.hide(),i.components.buygroup.setBuyButton("闪购已结束",!0))}}function a(){$("#wsgyy_close, #wsgyy_cancel").on("click",function(){$("#wsgyy_tel").val(""),layer.closeAll()}),$("#wsgyy_modify").on("click",function(){$("#wsgyy_tel").val("")}),$("#wsgyy_ok").on("click",function(){var e=$("#wsgyy_tel").val();t.checkTelNo(e)?window.$p.jsonpSaveBookShangouTel({reservationId:o.reservationId,phone:e},function(t){0==t.rc?(layer.msg("保存成功!"),$("#wsgyy_close").trigger("click")):(layer.msg("保存失败，请稍后再试!"),$("#wsgyy_close").trigger("click"))}):layer.msg("请输入正确的手机号")})}if(0==window.$p.isShowShangou())return!1;if(window.$p.activity&&window.$p.activity.ShanGou&&window.$p.activity.ShanGou.endNumber&&window.$p.nowNumber>window.$p.activity.ShanGou.endNumber)return!1;var o=this;a();n++;var s=$("#promotion_shangou"),r=$("#promotion_shangou span.des"),c=$("#promotion_shangou span.djs");i()},setInstallment:function(){function t(){var t=a.find(".installment-dropdown-wrapper");2===t.length?($(t[0]).addClass("right"),$(t[1]).addClass("left"),$(t[1]).next(".installment-dropdown").addClass("left")):1===$(this).length&&$(t[0]).addClass("right"),a.find(".installment-item").on("click",function(){$(this).parents(".business-detail").siblings().find(".inner").removeClass("checked").end().find(".installment-info span").text("选择分期"),$(this).find(".inner").addClass("checked").end().siblings().find(".inner").removeClass("checked"),$(this).parents(".business-detail").find(".installment-info span").text($(this).find(".ins-con-wrap").children("span:first-child").text()),$("#no_install").removeClass("checked"),$(".installment-dropdown-wrapper").removeClass("checked"),$(this).parents(".business-detail").find(".installment-dropdown-wrapper").addClass("checked"),$(this).parents(".business-detail").find(".installment-dropdown-wrapper").attr({"data-name":$(this).attr("data-name"),"data-cycle":$(this).attr("data-cycle"),"data-paytype":$(this).attr("data-paytype")}),$("#ljgm").text().indexOf("立即购买")!==-1&&($p.components.buygroup.setBuyButton("分期支付",!1),$("#jrgwc").hide())}),$("#no_install").on("click",function(){$(".installment-dropdown-wrapper").removeClass("checked"),$(".inner").removeClass("checked"),$(".installment-info span").text("选择分期"),$(this).addClass("checked"),$("#ljgm").text().indexOf("分期支付")!==-1&&($p.components.buygroup.setBuyButton("立即购买",!1),$("#jrgwc").show())})}function e(t){$.ajax({type:"GET",url:__detailConfig.getApiPath("installment")+"api/front/installment/get.jhtm?ss="+(new Date).getMilliseconds(),data:{gcode:code,terminal:$p.terminal,shopId:window.shopId,price:$p.baseInfo.price},dataType:"jsonp",jsonp:"callback",timeout:5e3,success:function(t){1==t.success?t.t&&i(t.t):console.log("分期接口异常！")},error:function(t){pd.log("the ajax is fail"+t.responseText+"--"+t.statusText,"warn")},complete:function(){t&&"function"==typeof t&&t()}})}function i(e){var i=e,a={antCheckLater:[],inviteInvestment:[]};if(i){if(i[11]){this.installmentCount++;for(var o=0;o<i[11].length;o++)a.antCheckLater.push({installmentName:"花呗分期",installmentPayment:i[11][o].payment,installmentStage:i[11][o].cycle,installmentInterest:i[11][o].serviceFee,installmentInterestRate:i[11][o].fee,installmentPayType:i[11][o].payType})}if(i[21]){this.installmentCount++;for(var s=0;s<i[21].length;s++)a.inviteInvestment.push({installmentName:"招行分期",installmentPayment:i[21][s].payment,installmentStage:i[21][s].cycle,installmentInterest:i[21][s].serviceFee,installmentInterestRate:i[21][s].fee,installmentPayType:i[21][s].payType})}n(a),t()}}function n(t){var e=t,i="",n="",a="",o="",s="";if($("#no_install").addClass("checked"),e.antCheckLater){o='<div class="business-detail hidden" id="install_huabei"><div class="installment-dropdown-wrapper" id="ins_huabei"><div class="installment-icon"><img src="https://p3.lefile.cn/product/adminweb/2019/05/06/e655fdc5-86aa-4b71-81bd-a03e5bab0be4.png" alt=""><span class="ins-tit">蚂蚁花呗</span><div class="installment-info"><span id="mayi_info"></span><i></i></div></div><div class="install-style-helper"></div></div><ul id="mayi_ul" class="installment-dropdown"></ul></div>';for(var r=0;r<e.antCheckLater.length;r++)i=0===e.antCheckLater[r].installmentInterest?"(无手续费)":"含手续费: 每期￥"+e.antCheckLater[r].installmentInterest+", 费率"+(100*e.antCheckLater[r].installmentInterestRate).toFixed(2)+"%",n+='<li data-name="花呗分期" data-cycle="'+e.antCheckLater[r].installmentStage+'" data-paytype="'+e.antCheckLater[r].installmentPayType+'" class="installment-item"><div class="ins-circle-wrap"><span class="circle"><span class="inner"></span></span></div><div class="ins-con-wrap"><span class="install-hover">¥'+Math.floor(100*e.antCheckLater[r].installmentPayment)/100+"x"+e.antCheckLater[r].installmentStage+'期</span><span class="ins-des">'+i+"</span></div></li>"}if(e.inviteInvestment){s='<div class="business-detail hidden" id="install_zhaoshang"><div class="installment-dropdown-wrapper" id="ins_zhaoshang"><div class="installment-icon"><img src="https://p1.lefile.cn/product/adminweb/2019/05/07/b919c0d4-96be-4ba3-a2bf-b710c73ec117.png" alt=""><span class="ins-tit">招商银行</span><div class="installment-info"><span id="zhaoshang_info"></span><i></i></div></div><div class="install-style-helper"></div></div><ul id="zhaoshang_ul" class="installment-dropdown"></ul></div>';for(var c=0;c<e.inviteInvestment.length;c++)i=0===e.inviteInvestment[c].installmentInterest?"(无手续费)":"含手续费: 每期￥"+e.inviteInvestment[c].installmentInterest+", 费率"+(100*e.inviteInvestment[c].installmentInterestRate).toFixed(2)+"%",a+='<li data-name="招行分期" data-cycle="'+e.inviteInvestment[c].installmentStage+'" data-paytype="'+e.inviteInvestment[c].installmentPayType+'" class="installment-item"><div class="ins-circle-wrap"><span class="circle"><span class="inner"></span></span></div><div class="ins-con-wrap"><span class="install-hover">¥'+Math.floor(100*e.inviteInvestment[c].installmentPayment)/100+"x"+e.inviteInvestment[c].installmentStage+'期</span><span class="ins-des">'+i+"</span></div></li>"}n&&($("#container_installment").append(o),$("#mayi_info").text("选择分期"),$("#mayi_ul").html(n),$("#install_huabei").removeClass("hidden")),a&&($("#container_installment").append(s),$("#zhaoshang_info").text("选择分期"),$("#zhaoshang_ul").html(a),$("#install_zhaoshang").removeClass("hidden")),(a||n)&&$("#container_installment").removeClass("hidden")}var a=$("#container_installment");$(".install-style-helper");e()}},window.components||(window.components={}),window.components.PromotionInfo=e}(window.PDUtil),function(t){function e(e){this.data={},this.$detail_main=t("#detail_main"),this.$detail_left=t("#detail_left"),this.$detail_right=t("#detail_right"),e&&this.init()}var i=window.passport;e.prototype={constructor:e,init:function(){i.load?i.load(function(){n.init()}):n.init(),this.__initFloat()},__initFloat:function(){var e=this,i=t(document),n=1,a=0;t(window).on("scroll",function(){var t=e.$detail_main.offset(),o=t.top,s=0;if(e.$detail_left.height()+10>e.$detail_main.height())return!1;var r=i.scrollTop(),c=e.$detail_main.height()-e.$detail_left.height(),d=r-o;if(r-o>=c&&(d=c),r<=o){if(a=1,n==a)return!1;n=a,e.$detail_left.removeAttr("style")}else if(s=o+e.$detail_main.height(),r+e.$detail_left.height()<s)a=2,n=a,e.$detail_left.css({"margin-top":d});else{if(a=3,n==a)return!1;e.$detail_left.css({"margin-top":c}),n=a}})}};var n={$sc:t("#a_sc"),init:function(){this.$sc=t("#a_sc"),i&&i.isLogin()?n.p_get("findfavorites.do?ss=",n.suc):n.$sc.removeClass("sc").off("click").on("click",function(){i.show(),i.loginRedirect=window.location.href})},p_get:function(t,e){i&&i.isLogin()?window.$p.loadMyFavorite({url:t},e):(i.show(),i.loginRedirect=window.location.href)},suc:function(t){"0"==t.rc?n.removeFavorites():n.addFavorites()},addFavorites:function(){n.$sc.removeClass("sc").off("click").on("click",{type:"add"},n.doSC)},removeFavorites:function(){n.$sc.addClass("sc").off("click").on("click",n.doSC)},doSC:function(t){t.data&&"add"===t.data.type?n.p_get("addfavorites.do?ss=",function(t){if("0"==t.rc){n.removeFavorites();try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid?ga("send","event","Tk_ProductDetail_PC","收藏",window.code):ga("send","event","ProductDetail_PC","收藏",window.code)}catch(t){PDUtil.warn("点击详情页收藏按钮 监控方法错误 ------------->"),PDUtil.warn(t)}}}):n.p_get("deletefavorites.do?ss=",function(t){"0"==t.rc&&n.addFavorites()})}};window.components||(window.components={}),window.components.ScrollPicture=e}(window.jQuery),function(){function t(t){this.data={allService:[],all:[],selectedArray:[]},this.$box=$("#div_service"),this.$serviceBox=$("#div_service .serviceBox"),this.$container=$("#div_service"),t&&this.init()}t.prototype={constructor:t,init:function(){try{var t=this;if(!window.$p.baseInfo.isHasService)return;this.loadData(function(){t.data.allService.length>0&&(t.renderDom(),t.bindEvent())})}catch(t){window.PDUtil.warn("service组件=> init方法错误 ---------->"),window.PDUtil.warn(t)}},loadData:function(t){var e=this;window.$p.loadServiceInfo({},function(i){200==i.status&&i.data&&i.data.length>0&&(e.data.all=i.data,e.data.allService=e.formatServiceData(i.data),t&&t())})},renderDom:function(){try{for(var t="",e=0;e<this.data.allService.length;e++){var i=this.data.allService[e],n=e<2==1?"noMarginTop":"",a=e%2==0?"noMarginLeft":"",o=e%2==1?"leftBox":"";if(t+='<li class="item '+n+" "+a+'" data-code="'+i.list[0].code+'" latag="latag_pc_detail_chooseservice_'+code+"_"+i.list[0].code+'"><span class="ellipsis outer-1">'+i.list[0].serviceGoodsName+'</span> ￥<span class="recommend-price-outer">'+i.list[0].price+'</span><i class="icon"></i>',t+='<div class="hoverBox '+o+'"><div class="shade"><span class="ellipsis middle-1">'+i.list[0].serviceGoodsName+'</span> ￥<span class="recommend-price-middle">'+i.list[0].price+'</span><i class="icon"></i></div>',i.list.length>0){for(var s=0;s<i.list.length;s++){var r=i.list[s];t+='<div class="detail clearfix" data-code="'+r.code+'" latag="latag_pc_detail_chooseservice_'+code+"_"+r.code+'"><div class="clickBox"><span class="circle"><span class="inner"></span></span><p class="content">'+r.serviceGoodsName+'</p><span class="recommend-opt"> ￥<b class="recommend-price">'+r.price+'</b></span></div><a class="more" href="/product/'+r.code+'.html" target="_blank"><u>详情</u><span>></span></a></div>'}t+="</div>"}t+="</li>"}t.length>0&&(this.$serviceBox.append(t),this.$container.removeClass("hidden"))}catch(t){window.PDUtil.warn("service组件=> renderDom方法错误 ---------->"),window.PDUtil.warn(t)}},bindEvent:function(){var t=this,e=this.$serviceBox.find(".item"),i=e.find(".hoverBox .detail .clickBox");i.on("click",function(){var e=$(this),i=e.parent(".detail"),n=e.parents(".detail").attr("data-code");i.hasClass("selected")?(i.removeClass("selected"),e.parents(".item").removeClass("selected"),t.removeSelectedService(i.attr("data-code"))):(t.removeSelectedService(i.siblings(".selected").attr("data-code")),i.addClass("selected").siblings().removeClass("selected"),i.parents(".item").addClass("selected"),$(this).parents(".item").find(".middle-1").text($(this).find(".content").text()),$(this).parents(".item").find(".recommend-price-middle").text($(this).find(".recommend-price").text()),$(this).parents(".item").find(".outer-1").text($(this).find(".content").text()),
$(this).parents(".item").find(".recommend-price-outer").text($(this).find(".recommend-price").text())),e.parents(".item").attr("data-code",n);var a=$p.calcPrice();window.$p.components.buygroup.updatePrice(a),$(".serviceBox .item .hoverBox").css({display:"none"})}),$("ul.serviceBox li").on("mouseleave",function(){var e=$(this).attr("data-code");if($(this).hasClass("selected")){t.addSelectedService(e),$(this).attr("latag","latag_pc_detail_chooseservice_"+code+"_"+e).removeClass("item-hover");var i=$p.calcPrice();window.$p.components.buygroup.updatePrice(i)}else t.removeSelectedService(e);$(this).find(".icon").css({"background-image":"url(/series/product/xiaoxin/images/arrow-group.png)","background-position":"-47px 0px","background-repeat":"no-repeat"}),$(this).find(".hoverBox").css({display:"none"})}).on("mouseenter",function(){$(this).find(".icon").css({"background-image":"url(/series/product/xiaoxin/images/arrow-group.png)","background-position":"-28px 0px","background-repeat":"no-repeat"}),$(this).find(".hoverBox").css({display:"block"})})},formatServiceData:function(t){try{for(var e=[{productCode:code,cateCode:t[0].cateCode,categoryName:t[0].categoryName,list:[t[0]]}],i=!1,n=1;n<t.length;n++){i=!1;for(var a=0;a<e.length;a++)if(t[n].cateCode==e[a].cateCode){e[a].list.push(t[n]),i=!0;break}i||e.push({productCode:code,cateCode:t[n].cateCode,categoryName:t[n].categoryName,list:[t[n]]})}return e}catch(t){return window.PDUtil.warn("service组件=>formatServiceData方法错误 ------------>"),window.PDUtil.warn(t),[]}},getSelectedService:function(){for(var t=[],e=0;e<this.data.selectedArray.length;e++)t.push(this.data.selectedArray[e].code);return t},addSelectedService:function(t){var e=window.PDUtil.findFirst(this.data.selectedArray,function(e){return e.code==t});e||this.data.selectedArray.push(window.PDUtil.findFirst(this.data.all,function(e){return e.code==t}))},removeSelectedService:function(t){this.data.selectedArray=window.PDUtil.dropSome(this.data.selectedArray,function(e){return e.code==t})}},window.components||(window.components={}),window.components.Service=t}(),function(){var t={},e={},i=!1;"undefined"!=typeof global&&global&&"object"==typeof module&&module.exports?(i=!0,t=require("../../../../base/pdbase").PDUtil,e=require("jquery")):(t=window.PDUtil,e=window.$);var n=function(t,e){function i(){try{var e=this;this.classPrefix="jiathis",this.data={buttonList:{weibo:{id:"weibo",className:e.classPrefix+"_button_tsina",title:"分享到微博",icon:"share-icon-weibo"},qzone:{id:"qzone",className:e.classPrefix+"_button_qzone",title:"分享到QQ空间",icon:"share-icon-qzone"},renren:{id:"renren",className:e.classPrefix+"_button_renren",title:"分享到人人网",icon:"share-icon-renren"},weixin:{id:"weixin",className:e.classPrefix+"_button_weixin",title:"分享到微信",icon:"share-icon-weixin"}}},this.webMapping={weibo:"weibo",qzone:"qzone",renren:"renren",weixin:"weixin"},this.classPrefix="jiathis",this.$container=null,this.before_click=null,this.couponId="96f9c1b44910c5f6",this.shareCode=""}catch(e){t.warn("私人订制组件=> init方法错误--------->"),t.warn(e)}}return i.prototype={constructor:i,getButtonByKey:function(t){var e=this,i=e.data.buttonList;for(var n in i)if(n==t)return i[n];return i.qzone},getButtonByClassName:function(t){var e=this,i=e.data.buttonList;for(var n in i)if(i[n].className==t)return i[n];return i.qzone},init:function(){window.jiathis_config=null,e("body").append('<a href="" target="_blank" style="display: none;"><span id="pd_share_entry_btn">分享</span></a>'),this.renderDom(),this.renderRightShare(),this.bindEvent(),this.__initShare()},__initShare:function(){e("#div_share").on("mouseover",function(){e(".share_box").show()}).on("mouseleave",function(){e(".share_box").hide()}),this.before_click=function(){var t;if(!window.passport.isLogin())return passport.show(),e(".share_box").hide(),!1;var i="";i=window.$p.baseInfo.pcPromotion?e("#pc_promotion").text():e("#div_product_dec").text();var n=window.$p.getShareTitle();t=1===isC2C&&0==window.$p.isShowShangou()?location.protocol+"//"+location.host+location.pathname+"?sharecode="+passport.cookie.lenovoId+"&promotionType=0":location.protocol+"//"+location.host+location.pathname,window.jiathis_config={url:encodeURIComponent(t),title:n,summary:i,pic:e("#winpic").attr("src")}}},bindEvent:function(){var i=this;i.$container.on("click",".share_box .jiathis_style > a",function(){if(!window.passport)return t.warn("分享时，登录模块没有正确加载"),!1;var n=e(this);i.before_click&&"function"==typeof i.before_click&&i.before_click.call(n,i);var a=i.data.buttonList[n.attr("data-key")];a&&i.share(a.id)}),i.$container.on("click","#a_share",function(){if(!window.passport)return t.warn("分享时，登录模块没有正确加载"),!1;var n=e(this);isC2C||e("#a_share_info").hide(),i.before_click&&"function"==typeof i.before_click&&i.before_click.call(n,i),i.shareModle(!1);try{"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid?ga("send","event","Tk_ProductDetail_PC","分享有礼",window.code):ga("send","event","ProductDetail_PC","分享有礼",window.code)}catch(t){PDUtil.warn("点击详情页分享有礼按钮 监控方法错误 ------------->"),PDUtil.warn(t)}}),e("#share_wechat_close").on("click",function(){return e("#share_dialog_box").hide(),!1});try{1==shopId&&(i.shareCode=PDUtil.queryString("sharecode"),i.shareCode&&e.ajax({url:PDUtil.getItemDomain()+"/api/c2c/sharedby.do",type:"GET",data:{sharecode:i.shareCode,sourceurl:i.getShareCodeUrl(),promotionType:"0",promotionName:"我的小伙伴购买联想电脑下单立得专属优惠券，快来看看吧！"},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_c2c_sharedby",timeout:5e3}),e("#fixed_share_btn").click(function(){var t=e(this);i.before_click&&"function"==typeof i.before_click&&i.before_click.call(t,i),i.shareModle(!0)}))}catch(t){}},renderDom:function(){var t=this;if(t.$container){var i=t.$container.find(".jiathis_style a");i.each(function(){var i=e(this),n=t.getButtonByClassName(i.attr("class")),a=n&&n.icon;i.attr("data-key",n.id).append('<span class="share-icon '+(a||"")+'"></span>')})}},share:function(i){var n=this,a=window.jiathis_config;if(!a)return t.debug("全局config文件没有读取到"),!1;var o="";switch(i){case n.webMapping.weibo:o="http://service.weibo.com/share/share.php?title="+a.title+"&url="+a.url+"&source=bookmark&pic="+a.pic;break;case n.webMapping.qzone:o="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+a.url+"&title="+a.title+"&summary="+a.summary+"&pics="+a.pic;break;case n.webMapping.renren:o="http://widget.renren.com/dialog/share?resourceUrl="+a.url+"&srcUrl="+a.url+"&title="+a.title+"&pic="+a.pic+"&description="+a.summary;break;case n.webMapping.weixin:e("#share_wechat_image").empty();var o=decodeURIComponent(a.url),s=navigator.appName,r=navigator.appVersion,c=r.split(";"),d=(c[1]||c[0]).replace(/[ ]/g,"");return"Microsoft Internet Explorer"==s&&"MSIE6.0"==d?e("#share_wechat_image").qrcode({render:"table",width:220,height:220,text:o}):"Microsoft Internet Explorer"==s&&"MSIE7.0"==d?e("#share_wechat_image").qrcode({render:"table",width:220,height:220,text:o}):"Microsoft Internet Explorer"==s&&"MSIE8.0"==d?e("#share_wechat_image").qrcode({render:"table",width:220,height:220,text:o}):e("#share_wechat_image").qrcode({width:220,height:220,text:o}),e("#share_dialog_box").show(),!1;default:o="error"}return"error"==o?(window.PDUtil.debug("url匹配错误"),alert("分享失败，分享参数错误！"),!1):(e("#pd_share_entry_btn").parent().attr("href",o),void e("#pd_share_entry_btn").trigger("click"))},getmyShare:function(){var t,i,n="";return n=window.$p.baseInfo.pcPromotion?e("#pc_promotion").text():e("#div_product_dec").text(),1===isC2C&&0==window.$p.isShowShangou()?(t="我的小伙伴购买联想电脑下单立得专属优惠券，快来看看吧！",i=location.protocol+"//"+location.host+location.pathname+"?sharecode="+passport.cookie.lenovoId+"&promotionType=0"):(t="我的小伙伴购买联想电脑下单，快来看看吧！",i=location.protocol+"//"+location.host+location.pathname),{url:i,title:t,summary:n,pic:e("#winpic").attr("src")}},renderRightShare:function(){},getMd5Code:function(){var t=")(*&^%$#@!MNBVCX76543",i=this.couponId,n=passport.cookie.lenovoId,a=passport.cookie.loginName,o=n+a+i+t;return e.md5(o)},getShareCodeUrl:function(){var t="",e=window.location.href;return t=this.shareCode?e.substring(0,e.indexOf("?")):e},shareModle:function(t){try{if(!passport.isLogin())return void passport.show();var i=passport.cookie.lenovoId,n=$p.components.share;if(t)try{e.ajax({url:__detailConfig.getApiPath("gwc")+"coupons/bindCouponsForOnce.jhtm",type:"GET",data:{shopId:"1",lenovoId:i,memberCode:passport.cookie.loginName,couponId:n.couponId,sign:n.getMd5Code()},dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"jQueryJSONP_products_bindCouponsForOnce",timeout:5e3})}catch(t){}var a={url:window.location.href,title:"联想商城",summary:"联想商城",pic:"//shop.lenovo.com.cn/images/tempimage.gif"},o=$p.components.share.getmyShare(),s=e.extend(a,o);e("#urlInfo1").val(s.title),e("#urlInfo2").val(s.url),e("#urlInfo3").val(s.summary),e(".modelUrlCont_imgList").html('<li class="modelUrlCont_img_active"><img src="'+s.pic+'"><span class="gou_active"></span></li>'),e(".modelUrlModel").addClass("modelShow"),e(".modelUrlCont").addClass("modelShow"),gettextLength()}catch(t){}}},i}(t,e);i?module.exports=n:(window.components||(window.components={}),window.components.Share=n)}(),function(){var t={},e={},i=!1;"undefined"!=typeof global&&global&&"object"==typeof module&&module.exports?(i=!0,t=require("../../../../base/pdbase").PDUtil,e=require("jquery")):(t=window.PDUtil,e=window.$);var n=function(t,e){function i(i){try{this.data={price:0},this.$container=e("#container_dingzhi"),this.$psonPic=e("#pson-pic"),this.$box=e("#div_dingzhi"),this.$dialog=e("#srdz_dialog"),this.selectedID="",this.postData={},this.$box_content=e("#personal-box"),this.$button_top=e("#srdz_style_topbtn"),this.$button_bottom=e("#srdz_style_bottombtn"),this.page=1,this.totalPage=1,this.w=0,this.scrollHeight=0,i&&this.init()}catch(e){t.warn("私人订制组件=> init方法错误--------->"),t.warn(e)}}var n={picture:{code:1,des:"私人订制喷图"},words:{code:2,des:"私人订制刻字"}};return i.prototype={constructor:i,init:function(){var t=this;if(window.$p.baseInfo.isHasPersonal){var e=window.$p.baseInfo.isPersonalPositions;if(e&&e.length>0){t.$container.removeClass("hidden"),t.bindEvent();for(var i=0;i<e.length;i++)t.getdata(e[i])}}},bindEvent:function(){var t=this;t.$box.on("click","#pson-pic",function(){layer.open({type:1,skin:"personal-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["755px","560px"],move:!1,scrollbar:!0,content:e("#personal-layer-wrap")}),e(".table-style").ellipsis(),e(".img-title").ellipsis(),e("#personal-box .a-content .right > div").each(function(i){new t.scrollBar({container:e(this),clientArea:e(this).find(".list-wrap")})});var i,n,a=(e(".a-content").offset().top,e(".zoom-img-area"));e(".img-wrap").off().on("mouseenter",function(){i=e(this).position().left+30+108+5+e(this).width(),n=e(this).find("img").position().top+24,a.html('<img src="'+e(this).children("img").attr("src")+'">').css({top:n,left:i}).show()}).on("mouseleave",function(){a.hide()}),t.scrollHeight=e(".scroll-container ul.list").height();var o=e(this),s=o.attr("data-id");if(t.selectedID=s,t.setPriceListWidth(),e(".a-category").width()<685)e(".price-list-arrow").hide();else{var r=0,c=0,d=e(".a-category p.item").length;e(".price-list-arrow.right").off("click").on("click",function(){d>1&&(c-=e(".a-category p.item").eq(r).outerWidth(!0),e(".a-category").animate({left:c+"px"},300),r++,d--)}),e(".price-list-arrow.left").off("click").on("click",function(){r>0&&(r--,d++,c+=e(".a-category p.item").eq(r).outerWidth(!0),e(".a-category").animate({left:c+"px"},300))})}}),t.$box.on("click","#pson-txt",function(){layer.open({type:1,skin:"personal-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["691px","535px"],move:!1,content:e("#c-wrap")});var i=e(this),n=i.attr("data-id");t.selectedID=n}),e(".personal-des").on("mouseenter",function(){e(".personal-des").append('<div id="personaldes" ><h1>联想定制机购买须知</h1><div class="sd-des-cont"><p><span>1. </span>定制机属特殊商品，不适用于七天无理由退货，下单付款后即进入定制流程，非因产品质量问题无法做退货处理。</p><p><span>2. </span>本订单属于用户定制订单，预计在15个工作日内完成发货</p><p><span>3. </span>笔记本电脑屏幕外壳属于非电性能部件，且不在标准保修范围之内，如需更换可能产生相关费用， 并且只能更换为原厂非原定制机型外壳。因此请小心保养您的定制机外壳。</p><p><span>4. </span>定制机外壳装饰，不在标准保修服务范围内。</p></div><div class="arrow-wrap sd-tips"><div class="up-arrow pre-arrow"></div><div class="up-arrow curr-arrow"></div></div></div>'),e("#personaldes").show()}).on("mouseleave",function(){e("#personaldes").remove()}),t.$box_content.on("click",".a-category p.item",function(i){var n=e(this);t.page=1,t.w=0,n.hasClass("checked")?t.totalPage=1:(n.siblings(".checked").removeClass("checked"),n.addClass("checked"),t.showFirstTabStyle(t.selectedID,n.attr("data-index"))),e(".scroll-container .list").css("top","0"),t.setButtonShowHide(),i.stopPropagation()}),e("#personal-layer-wrap, #c-wrap").on("click",".dz_OK",function(){t.eventHandlerForOKButton()}),e("#personal-layer-wrap, #c-wrap").on("click",".dz_cancel",function(){e("#"+t.selectedID+" .a-content ul.list-wrap li").removeClass("checked"),e("#c-wrap .c-write textarea").val(""),e("#pson-txt .personal-pic-txt").text("选择C面刻字"),t.removePostData(t.selectedID),layer.closeAll()}),t.bindImageEvents()},setPriceListWidth:function(){var t=e(".a-category"),i=t.find("p.item"),n=0;i.each(function(t,i){n+=e(i).width()+29}),t.css("width",n+"px")},eventHandlerForOKButton:function(){var i=this,a=e("#"+i.selectedID),o=a.attr("id"),s=a.attr("data-side"),r=a.attr("data-personaltype");if("2"===r)try{var c=e(".dz_text").val(),d=new RegExp(/^([^\u4e00-\u9fa5A-Za-z0-9,.?!，。？！])*$/);if(c&&""!==c)for(var l=0;l<c.length;l++)if(d.test(c[l]))return layer.msg("请输入字母,数字或汉字"),!1}catch(t){}var p=a.find(".a-category p.swiper-slide.checked"),u=a.find("#c-price");if("1"===r&&(!p||1!=p.length))return p.attr("data-personaltype")==n.picture.code?layer.msg("请选择喷绘图片类型！"):layer.msg("请选择价格！"),!1;var h=p.attr("data-priceid"),m=u.attr("data-priceid");if(!h&&!m)return layer.msg("私人订制失败，请稍后再试！"),t.warn("priceid获取失败"),!1;var f=p.attr("data-price"),v=u.attr("data-price");if(!f&&!v)return layer.msg("私人订制失败，请稍后再试！"),t.warn("price获取失败"),!1;if(r==n.picture.code){var g=a.find(".a-content .sdtp_pics ul.list-wrap li.checked");if(1!=g.length)return layer.msg("请选择喷绘图片！"),!1;var w=g.attr("data-code");if(!w)return layer.msg("私人订制失败，请稍后再试！"),t.warn("imageCode获取失败"),!1;var $=g.attr("data-url");if(!$)return layer.msg("私人订制失败，请稍后再试！"),t.warn("imageUrl获取失败"),!1;var b=g.attr("data-name");if(!b)return layer.msg("私人订制失败，请稍后再试！"),t.warn("imageName获取失败"),!1;var y={price:f||v,priceID:h||m,ptmode:n.picture.code,ptside:s.replace("面",""),pttype:1,ptpicCode:w,pturl:$,picName:b};i.addPostData(o,y)}else{if("2"!=r)return layer.msg("私人订制参数错误，请重试"),!1;var _=e("textarea.dz_text"),x=_.val();if(!x)return layer.msg("请输入刻字内容"),!1;if(x.length>20)return layer.msg("文字长度不能超过20个汉字"),!1;if(/(<|\/|>)/gi.test(x))return layer.msg('内容含有非法字符 "<"、"/"、">"，请重新输入'),!1;var y={price:f||v,priceID:h||m,ptmode:n.words.code,ptside:s.replace("面",""),pttype:1,ptword:x};i.addPostData(o,y),e("#pson-txt .personal-pic-txt").text("已选择")}layer.closeAll(),e(".personal-pic-txt").ellipsis()},bindImageEvents:function(){var t=this;t.$box_content.on("click",".list .table-style",function(i){var n=e(this);n.hasClass("active")||(n.siblings(".active").removeClass("active"),n.addClass("active"),t.showImageListWithCateCode(n.parents("div.a-content"),n.attr("data-tabindex"))),i.stopPropagation()}),t.$box_content.on("click",".list-wrap li",function(t){var i=e(this);i.hasClass("checked")?i.removeClass("checked"):(i.siblings("li").removeClass("checked"),i.parents(".scroll-container").siblings().find("li").removeClass("checked"),i.addClass("checked")),t.stopPropagation()})},renderData:function(e,i){var a=this;try{var o=i&&i.data&&i.data[0]&&i.data[0].data;if(o&&o instanceof Array&&o.length>0){var s=new Date-0;o[0]&&o[0].personalType==n.picture.code?a.renderImage(e,"srdz_image_"+s,o):a.renderText(e,"srdz_text_"+s,o)}}catch(e){t.warn("私人订制组件=> renderData方法错误----------------> "),t.warn(e)}},renderImage:function(t,i,n){this.$box.append('<div class="business-detail personal-pic" id="pson-pic" data-id="'+i+'"><span class="personal-pic-title" data-text="选择'+t+'喷图" style="display: none;">A面定制:</span><span class="personal-pic-txt">选择'+t+"喷图</span></div>");var a=e("#tmpl_srdz_image");a&&1==a.length&&(a.tmpl({datas:n,dataID:i,side:t}).appendTo(this.$box_content),e("#"+i+" div.a-category p.item:eq(0)").addClass("checked"),this.showFirstTabStyle(i,0),this.scrollButtonEvent(),this.setButtonShowHide())},renderText:function(t,i,n){this.$box.append('<div class="business-detail personal-pic" id="pson-txt" data-id="'+i+'"><span class="personal-pic-title" data-text="选择'+t+'刻字" style="display: none;">C面定制:</span><span class="personal-pic-txt">选择'+t+"刻字</span></div>");var a=e("#tmpl_srdz_text");a&&1==a.length&&a.tmpl({datas:n,dataID:i,side:t}).appendTo(".c-inner")},renderPalyPic:function(t){e.ajax({type:"get",url:PDUtil.getItemDomain()+"/cache/query?m=hget&k=personal_window_"+window.code+"&f="+t,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_cache_query",timeout:5e3,success:function(t){var e=[],i=t.data[0].printPicArr;if(i)for(var n=0;n<i.length;n++)e.push({src:i[n]});window.$p.components.playpic.renderPicture(e)}})},setButtonShowHide:function(){var t=this;t.page>=t.totalPage?e("#srdz_style_bottombtn").removeClass("visible"):e("#srdz_style_bottombtn").addClass("visible"),t.page<=1?e("#srdz_style_topbtn").removeClass("visible"):e("#srdz_style_topbtn").addClass("visible")},scrollButtonEvent:function(){var t=this;e("#srdz_style_topbtn").on("click",function(){t.page>1&&(t.page--,t.w+=t.scrollHeight,e(".scroll-container ul.list").animate({top:t.w+"px"},300),t.setButtonShowHide())}),e("#srdz_style_bottombtn").on("click",function(){t.page<t.totalPage&&(t.page++,t.w-=t.scrollHeight,e(".scroll-container ul.list").animate({top:t.w+"px"},300),t.setButtonShowHide())})},getdata:function(i,n){if(!i)return!1;var a=this;e.ajax({url:PDUtil.getItemDomain()+"/cache/query?m=hget&k=personal_init_"+code+"&f="+encodeURI(i)+"&ss="+(new Date).getMilliseconds(),dataType:"jsonp",jsonp:"callback",timeout:5e3,success:function(e){try{a.renderData(i,e),"function"==typeof n&&n()}catch(e){t.warn("私人订制组件=> getdata方法错误 ------------->"),t.warn(e)}},error:function(e){t.warn(e)}})},showFirstTabStyle:function(t,i){var n=e(".a-content");n.find(".list .table-style").hide();var a=e("#"+t).find(".list .tab-price"+i),o=a.length;0==o?this.totalPage=1:this.totalPage=o%10==0?o/10:parseInt(o/10)+1,a.removeClass("active"),a.eq(0).addClass("active"),a.show(),this.showImageListWithCateCode(n,a.eq(0).attr("data-tabindex"))},showImageListWithCateCode:function(t,e){t.find("div.sdtp_pics").hide(),t.find("div.sdtp_pics."+e).show(),new this.scrollBar({container:t.find("div.sdtp_pics."+e),clientArea:t.find("div.sdtp_pics."+e).find(".list-wrap")})},addPostData:function(t,i){if(!i)return!1;var a=0;this.postData[t]&&(a=this.postData[t].price),this.postData[t]=i;var o=e('.personal-pic[data-id="'+t+'"]'),s="";s=i.ptmode==n.picture.code?i.picName+"("+i.price+"元)":i.priceID+"("+i.price+"元)",o.find("span.personal-pic-txt").attr("title",s).text(i.picName).end().find("span.personal-pic-title").show(),o.addClass("checked"),this.data.price=this.data.price-a+parseFloat(i.price);var r=window.$p.calcPrice();$p.components.buygroup.updatePrice(r),i.ptmode==n.picture.code&&this.renderPalyPic(i.ptpicCode)},removePostData:function(i){var a=this.postData[i];if(!a)return t.warn("取消私定时没有对象！"+i),!1;var o=a.price,s=e('.personal-pic[data-id="'+i+'"]');s.find("span.personal-pic-txt").attr("title",s.find("span.personal-pic-title").attr("data-text")).text(s.find("span.personal-pic-title").attr("data-text")).end().find("span.personal-pic-title").hide(),s.removeClass("checked"),this.data.price=this.data.price-o;var r=window.$p.calcPrice();$p.components.buygroup.updatePrice(r),a.ptmode==n.picture.code&&window.$p.components.playpic.renderPicture([]),delete this.postData[i]},getdz:function(){var i="";try{if(!e.isEmptyObject(this.postData)){var n=[];for(var a in this.postData)n.push(this.postData[a]);i=JSON.stringify(n)}t.debug("私人订制数据：-------------->"),t.debug(i)}catch(e){t.warn("私人订制组件=>getdz 方法错误-------------->"),t.warn(e)}return encodeURIComponent(i)},isSelcetedSrdz:function(){var t=!1,i=e("#div_dingzhi div.personal-pic");return e.each(i,function(i,n){e(n).hasClass("checked")&&(t=!0)}),t},scrollBar:function(t){function i(t,e){"sb"==t?(e<0?e=0:e>h-u&&(e=h-u),d.css("top",e),p.css("margin-top",e*g)):"content"==t&&(e>0?e=0:-e>m-h&&(e=-(m-h)),d.css("top",-e/g),p.css("margin-top",e))}function n(t){p.css("margin-top",-t*g)}function a(t){var e=!1;t>0?(t=0,e=!0):-t>m-h&&(t=-(m-h),e=!0),p.css("margin-top",t);var i=-t/g;return d.css("top",i),e}function o(t,e){return"mouseover"==r(t).type?!(s(e,r(t).relatedTarget||r(t).fromElement)||(r(t).relatedTarget||r(t).fromElement)===e):!(s(e,r(t).relatedTarget||r(t).toElement)||(r(t).relatedTarget||r(t).toElement)===e)}function s(t,e){return t.contains?t!=e&&t.contains(e):!!(16&t.compareDocumentPosition(e))}function r(t){return t||window.event}if(this.clientArea=t.clientArea||null,this.container=t.container||null,!this.clientArea instanceof jQuery||!this.container instanceof jQuery)return!1;if(!(this.container.find(".mlc-wrap").length>0&&this.container.find(".scroll-div").length>0)){this.visibleArea=e('<div class="mlc-wrap"></div>'),this.clientArea.addClass("mlc-list"),this.container.addClass("scroll-container"),this.container.append(this.visibleArea.append(this.clientArea));var c=e('<div class="scroll-div"></div>'),d=e('<div class="scroll-block"></div>');if(this.clientArea.height()<=this.container.height())return c.remove(),!1;this.container.append(c.append(d));var l=this.visibleArea.height(),p=this.clientArea,u=d.height(),h=d.parent().height(),m=this.clientArea.outerHeight(),f=30,v=!1;if(m<=h)return!1;u=h/m*h,u<60&&(u=60),d.css("height",u);var g=(m-h)/(h-u);d.mousedown(function(t){var i=t.clientY,a=e(this).position().top,t=t||event;return document.onmousemove=function(t){var t=t||event,e=a+t.clientY-i;e<0?e=0:e>h-u&&(e=h-u),d.css("top",e),n(e)},e(this).mouseup(function(){document.onmousemove=null,document.onmouseup=null}),document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null},t.preventDefault(),!1}),this.container.mouseover(function(t){o(t,this)&&(v=!0)}),this.container.mouseout(function(t){o(t,this)&&(v=!1)}),this.visibleArea.bind("mousewheel",function(t,e){var i=parseInt(p.css("margin-top")),n=t.originalEvent.wheelDelta||-t.originalEvent.detail,e=Math.max(-1,Math.min(1,n));if(e<0){if(!a(i-f))return!1}else if(!a(i+f))return!1}),c.click(function(t){if(t.target==this){var n=t.clientY,a=e("html").scrollTop(),o=n+a,s=d.offset().top;o>s?i("content",parseInt(p.css("margin-top"))-l):i("content",parseInt(p.css("margin-top"))+l)}})}}},i}(t,e);i?module.exports=n:(window.components||(window.components={}),window.components.Srdz=n)}(),function(t){function e(t){this.data={all:[],selectedItem:-1,index:[]},this.$container=$("#swiper-wrap"),this.$box=$("#div_taocan"),t&&this.init()}e.prototype={constructor:e,init:function(){this.getAllData(),this.renderDom(),this.bindEvent()},renderDom:function(){try{var e=window.$p,i=this.data.all,n="",a="";$("#tc_pics_scroll").html('<img src="'+e.baseInfo.thumbnailsURL.path+'" alt=""><p class="title" title="'+e.baseInfo.name+'">'+e.baseInfo.name+'</p><p class="detail" title="'+e.baseInfo.brief+'">'+e.baseInfo.brief+'</p><p class="price">￥ <span>'+e.baseInfo.price+"</span></p>");for(var o="",s=0;s<i.length;s++){var r=i[s];n+='<li title="'+r.data[0].promotionName+'"><a href="javascript:;">'+r.data[0].promotionName+"(￥"+parseFloat(r.showPrice)+") </span></a></li>";for(var c=0;c<r.data.length;c++){var d=r.data[c];if(o=e.promotion.goodsDetailUrl&&e.promotion.goodsDetailUrl[d.code]||"/product/"+d.code+".html",a+=0==c?'<div id="tabs-'+(s+1)+'" class="tabsContent"><div class="swiperOuter"><ul class="swiperWrap clearfix">':'<li class="card"><a target="_blank" href="'+o+'"><img src="'+d.path+'" alt=""><p class="title" title="'+d.goodsName+'">'+d.goodsName+'</p><p class="detail" title="'+d.description+'">'+d.description+'</p><p class="price">￥ <span>'+d.productPrice+"</span></p></a></li>",c==r.data.length-1){var l="";l=r.canSell?'<button class="tc_pay" onclick="javascript:$p.components.buygroup.tcjrgwc(\''+r.data[0].id+"')\">加入购物车</button>":'<button class="tc_pay" style="background-color:#ccc;" class="tc_pay tc_pay_disable">加入购物车</button>',a+='</ul></div><div class="swiperBtn"><div class="left"><i class="taocan-left-arrow"></i></div><div class="right"><i class="taocan-right-arrow"></i></div></div><div class="toShopCart"><p><span>套餐价</span><span class="price">￥ <span>'+parseFloat(d.totalPrice-d.totalDiscountAmount)+'</span></span></p><p class="second">节省 <span>'+parseFloat(d.totalDiscountAmount)+"</span> 元</p>"+l+"</div></div>"}}}if(n.length>0&&(this.$box.append(n),this.$container.show(),a.length>0)){$("#promotion_box").append(a);var p=$("#swiper-wrap .tabsWrap .tabsItem li"),u=$("#swiper-wrap .tabsWrap .tabsContent");$(u[0]).addClass("active"),$(p[0]).addClass("active");for(var s=0;s<p.length;s++)!function(t){$(p[t]).on("click",function(){for(var e=0;e<u.length;e++)$(u[e]).removeClass("active"),$(p[e]).removeClass("active");$(u[t]).addClass("active"),$(p[t]).addClass("active"),$("#swiper-wrap").find("p.title").ellipsis()})}(s);$("#swiper-wrap").find("p.title").ellipsis();for(var h=0;h<$("#tabs-"+(h+1)+" li").length;h++)new PDUtil.mySwiper({fid:"#tabs-"+(h+1),ul:".swiperWrap",lis:".card",leftBtn:".swiperBtn .left",rightBtn:".swiperBtn .right",count:4})}}catch(e){t.warn("套餐组件=> renderDom方法错误 ------------->"),t.warn(e)}},bindEvent:function(){var t=this;this.$box.find("div.item").on("click",function(){var e=$(this),i=e.attr("data-index");e.hasClass("checked")?(e.removeClass("checked"),t.$box.find(".detail-taocan").eq(t.data.selectedItem).hide(),t.data.selectedItem=-1):(e.addClass("checked"),e.siblings(".checked").removeClass("checked"),t.$box.find(".detail-taocan").eq(t.data.selectedItem).hide(),t.data.selectedItem=i,t.$box.find(".detail-taocan").eq(t.data.selectedItem).show())}),this.$box.find(".detail-taocan .tc_close").on("click",function(){t.$box.find("div.item[data-index="+t.data.selectedItem+"]").removeClass("checked"),t.$box.find(".detail-taocan").eq(t.data.selectedItem).hide(),t.data.selectedItem=-1}),this.$box.find(".detail-taocan .tc_left").on("click",function(){var e=t.$box.find(".tc_pics"),i=e.width(),n=t.data.index[t.data.selectedItem];n.current>1&&(e.css({left:"-="+i+"px"}),n.current++)}),this.$box.find(".detail-taocan .tc_right").on("click",function(){var e=t.$box.find(".tc_pics"),i=e.width(),n=t.data.index[t.data.selectedItem];n.current<n.max&&(e.css({left:"+="+i+"px"}),n.current++)}),$("#div_taocan").find("a").ellipsis()},getAllData:function(){var e=this;try{var i,n=window.$p.processTaocanNeedShowList(),a=[];if(n)for(var o=0;o<n.length;o++){i=!1;for(var s=0;s<n[o].data.length;s++)0===$p.promotion.goodsStatus[n[o].data[s].code]&&(i=!0);i||a.push(n[o])}if(e.data.all=a,a.length>0)for(var r=0;r<a.length;r++){var c=a[r].data&&a[r].data.length||0,d=parseInt(c/4+1);e.data.index.push({current:1,max:d})}return a}catch(i){return t.warn("套餐组件=> getAllData方法错误 ------------->"),t.warn(i),e.data.all=[],e.data.all}}},window.components||(window.components={}),window.components.Taocan=e}(window.PDUtil),function(){function t(t){this.data={all:[]},this.$container=$("#container_o2ocity"),this.$box=$("#div_cities"),this.$box_city=$("#city_wrap"),this.$tabsWrap=$("#city_wrap .tabsWrap"),this.$picNew=$("#city_wrap .text span"),t&&this.init()}window.PDUtil;t.prototype={constructor:t,init:function(){this.getAllData(),this.renderDom(),this.bindEvent()},renderDom:function(){this.data.all&&this.data.all.length>0&&($("#thinko2oCityTemplate").tmpl({data:this.data.all}).appendTo(this.$tabsWrap),this.$container.removeClass("hidden"))},bindEvent:function(){function t(){return i.$box_city.hide(),i.$box.removeClass("open"),!1}function e(){i.$box_city.show(),i.$box.addClass("open")}var i=this;i.$box.on("mouseenter",function(){return $(this).find(".arrow").css({transform:"rotate(180deg)"}),e(),!1}),i.$box.on("mouseleave",function(){$(this).find(".arrow").css({transform:"rotate(0deg)"}),t()}),i.$picNew.on("click",function(){i.$box_city.find(".city_tab_province").show(),i.$box_city.find(".city_tab_city").attr("data-city",0).hide(),i.$box_city.find(".city_tab_area").attr("data-area",0).hide(),i.$box_city.find(".city_tab_country").attr("data-country",0).hide(),i.$box_city.find(".city_tab_title_province").addClass("active").siblings("li").removeClass("active");var t=$(".city_tab_title_province"),e=$(".city_tab_title_city"),n=$(".city_tab_title_area"),a=$(".city_tab_title_country");$(".city_tab_title_province").attr("data-province","1"),$(".city_tab_title_city").attr("data-province","0"),$(".city_tab_title_area").attr("data-province","0"),$(".city_tab_title_country").attr("data-province","0"),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area").hide(),i.$box_city.find(".city_tab_country").hide(),t.find("span").text("省"),e.find("span").text("市"),n.find("span").text("区/县"),a.find("span").text("镇/乡")}),i.$box_city.find(".city_tab_title_province").on("click",function(){i.$box_city.find(".city_tab_province").show(),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area").hide(),i.$box_city.find(".city_tab_country").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.find(".city_tab_title_city").on("click",function(){var t=i.$box_city.find(".city_tab_title_province").attr("data-province");i.$box_city.find(".city_tab_province").hide(),i.$box_city.find(".city_tab_city[data-province='"+t+"']").show().siblings(".city_tab_body").hide(),i.$box_city.find(".city_tab_area").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.find(".city_tab_title_area").on("click",function(){var t=i.$box_city.find(".city_tab_title_city").attr("data-city");i.$box_city.find(".city_tab_province").hide(),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area[data-city='"+t+"']").show().siblings(".city_tab_body").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.find(".city_tab_title_country").on("click",function(){var t=i.$box_city.find(".city_tab_title_area").attr("data-area");i.$box_city.find(".city_tab_province").hide(),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area").hide(),i.$box_city.find(".city_tab_country[data-area='"+t+"']").show().siblings(".city_tab_body").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.on("click",".city_tab_province dd",function(){var t=$(this),e=$(".city_tab_title_province"),n=$(".city_tab_title_city"),a=$(".city_tab_title_area"),o=$(".city_tab_title_country"),s=t.find("span:first").text(),r=t.attr("data-province");t.addClass("o2o-now").siblings("dd").removeClass("o2o-now"),e.find("span").text(s),e.attr("data-province",r),e.removeClass("active"),n.addClass("active");var c="市",d="区/县",l="镇/乡",p=0;n.show().attr("data-city",p),n.find("span").text(c),a.find("span").text(d),o.find("span").text(l),i.$box_city.find(".city_tab_province").hide();var u=$("dl.city_tab_city[data-province = '"+r+"']");u.find("dd.o2o-now").removeClass("o2o-now").end().show()}),i.$box_city.on("click",".city_tab_city dd",function(){var t=$(this),e=t.attr("data-city"),n=t.find("span:first").text(),a=$(".city_tab_title_city"),o=$(".city_tab_title_area"),s=$(".city_tab_title_country"),r="区/县",c="镇/乡",d=0;o.show().attr("data-area",d),o.find("span").text(r),o.addClass("active"),a.removeClass("active"),t.addClass("o2o-now").siblings("dd.o2o-now").removeClass("o2o-now"),a.find("span").text(n),s.find("span").text(c),a.attr("data-city",e);var l=$(".city_tab_title_province").attr("data-province");i.$box.attr("data-province",l),i.$box.attr("data-city",e),i.$box.find(".city_tab_city").hide();var p=$("dl.city_tab_area[data-city = '"+e+"']");p.find("dd.o2o-now").removeClass("o2o-now").end().show();
}),i.$box_city.on("click",".city_tab_area dd",function(){var t=$(this);if(t.find("span:first").hasClass("gray"))return!1;var e=t.attr("data-area"),n=t.find("span:first").text(),a=$(".city_tab_title_area"),o=$(".city_tab_title_country"),s="镇/乡",r=0;o.show().attr("data-area",r),o.find("span").text(s),o.addClass("active"),a.removeClass("active"),t.addClass("o2o-now").siblings("dd.o2o-now").removeClass("o2o-now"),a.find("span").text(n),a.attr("data-area",e);var c=$(".city_tab_title_province").attr("data-province"),d=$(".city_tab_title_city").attr("data-city");i.$box.attr("data-province",c),i.$box.attr("data-city",d),i.$box.attr("data-area",e),i.$box.find(".city_tab_area").hide();var l=$("dl.city_tab_country[data-area = '"+e+"']");l.find("dd.o2o-now").removeClass("o2o-now").end().show()}),i.$box_city.on("click",".city_tab_country dd",function(){var e=$(this);if(e.find("span:first").hasClass("gray"))return!1;var n=e.attr("data-country"),a=e.find("span:first").text(),o=$(".city_tab_title_country");e.addClass("o2o-now").siblings("dd.o2o-now").removeClass("o2o-now"),o.find("span").text(a);var s=$(".city_tab_title_province span").text(),r=$(".city_tab_title_city span").text(),c=$(".city_tab_title_area span").text(),d=$(".city_tab_title_country span").text(),l=$(".city_tab_title_province").attr("data-province"),p=$(".city_tab_title_city").attr("data-city"),u=$(".city_tab_title_area").attr("data-area");return i.$box.find(".address span.province").text(s),i.$box.find(".address span.city").text(r),i.$box.find(".address span.area").text(c),i.$box.find(".address span.country").text(d),i.$box.attr("data-province",l),i.$box.attr("data-city",p),i.$box.attr("data-area",u),i.$box.attr("data-country",n),t(),!1})},getAllData:function(){return this.data.all=$p.baseInfo.thinko2oCities||[],this.data.all}},window.components||(window.components={}),window.components.ThinkO2OCityList=t}(),function(){function t(t){this.data={all:[],selectedArray:[]},this.$container=$("#recommend-wrap"),this.$box=$(".swiperItemWrap"),t&&this.init()}t.prototype={constructor:t,init:function(){this.getAllData(),this.renderDom(),this.bindEvent()},renderDom:function(){for(var t=window.$p,e=this.data.all,i="",n=0;n<e.length;n++){var a=e[n],o=t.promotion.goodsDetailUrl&&t.promotion.goodsDetailUrl[a.code]||"/product/"+a.code+".html";i+='<li class="item" data-code="'+a.code+'"><div class="imgBox"><img src="'+PDUtil.cutPicturePath(a.path,48)+'" alt=""></div><a href="'+o+'" target="_blank"><p class="title-s" title="'+a.goodsName+'">'+a.goodsName+'</p></a><div class="price"><p class="main">￥<span>'+a.showPrice.toFixed(2)+'</span></p><p class="save">省￥<span>'+a.discountAmount+"</span></p></div></li>"}i.length>0&&(this.$box.html(i),this.$container.removeClass("hidden")),e.length<=6?this.$container.find(".swiperBtn").hide():new PDUtil.mySwiper({fid:"#recommend-wrap",ul:".swiperItemWrap",lis:".item",leftBtn:".swiperBtn .left",rightBtn:".swiperBtn .right",count:6}),$(".title-s").ellipsis({row:2,onlyFullWords:!0,position:"tail"})},bindEvent:function(){var t=this;this.$box.find("li.item").on("click",function(){var e=$(this),i=e.attr("data-code");if(e.hasClass("checked"))e.removeClass("checked"),t.data.selectedArray=PDUtil.dropSome(t.data.selectedArray,function(t){return t.code==i});else{e.addClass("checked");var n=PDUtil.findFirst(t.data.selectedArray,function(t){return t.code==i});n||t.data.selectedArray.push(PDUtil.findFirst(t.data.all,function(t){return t.code==i}))}var a=$p.calcPrice();$p.components.buygroup.updatePrice(a)})},getAllData:function(){var t=$p.processXJNeedShowList();return this.data.all=t,t},getSelectedCodeArray:function(){for(var t=[],e=0;e<this.data.selectedArray.length;e++)t.push(this.data.selectedArray[e].code);return t}},window.components||(window.components={}),window.components.TuiJianXuanJian=t}(),function(){function t(t){this.data={myVideoUrl:"",my3DExtra:"",my3DCode:"",flag:!1},t&&this.init()}t.prototype={constructor:t,isLenovoOfficialApp:/lenovoofficialapp/i.test(navigator.userAgent),init:function(){1==this.data.flag?this.render():this.json3DUrl(this.render.bind(this))},json3DUrl:function(t){var e=this,i=window.goodsCode;this.data.flag=!0,$.ajax({type:"GET",url:__detailConfig.getApiPath("pro3d")+"goods/products/v3d/get/B00001",data:{code:i},dataType:"jsonp",jsonp:"jsonpCallback",success:function(t){0==t.status&&2!=t.status&&(e.data.my3DCode=t.result[i]["3D"]||"",e.data.myVideoUrl=t.result[i].vedio||"")},complete:function(){t&&"function"==typeof t&&t.bind(this)()},error:function(t){PDUtil.debug("invoke 3D interface error ------------->")}})},render:function(){var t=this;t.isLenovoOfficialApp||(t.data.my3DCode="");try{var e;if(""==t.data.myVideoUrl&&""==t.data.my3DCode)return;try{var i=document.documentElement.clientWidth}catch(t){PDUtil.debug("videoPlayers组件=> 获取宽高失败 ----------->"),PDUtil.debug(t)}""!=t.data.myVideoUrl&&""!=t.data.my3DCode?($("#single_video").on("click",function(){$(".m").css("height",i),$(".m").show(),videojs.options.flash.swf="video-js.swf",e=videojs("my-video",{fluid:!0}),e.src(t.data.myVideoUrl),e.ready(function(){$("div.closevedio").show(),this.show(),this.play(),e.on("ended",function(){$(".m").hide(),this.pause(),this.hide()})})}),$("div.closevedio").click(function(){$(".m").hide(),e.pause(),e.hide()}),$("#show3DBtn").on("click",function(){t.process3DShow(t.data.my3DCode,t.data.my3DExtra)}),$("#videoTo3D").find("i").eq(0).on("click",function(){$("#videoTo3D").find("i").eq(1).removeClass("on"),$("#videoTo3D").find("i").eq(0).addClass("on"),$("#single_video").hide(),$("#show3DBtn").show()}),$("#videoTo3D").find("i").eq(1).on("click",function(){$("#videoTo3D").find("i").eq(0).removeClass("on"),$("#videoTo3D").find("i").eq(1).addClass("on"),$("#single_video").show(),$("#show3DBtn").hide()}),$("#videoTo3D").find("i").eq(1).hasClass("on")?($("#videoTo3D").find("i").eq(0).removeClass("on"),$("#videoTo3D").show(),$("#single_video").show()):($("#videoTo3D").find("i").eq(0).addClass("on"),$("#videoTo3D").show(),$("#show3DBtn").show())):""!=t.data.myVideoUrl&&""==t.data.my3DCode?($("#single_video").on("click",function(){$("#single_video").hide(),$(".m").css("height",i),$(".m").show(),videojs.options.flash.swf="video-js.swf",e=videojs("my-video",{fluid:!0}),e.aspectRatio("1:1"),e.src(t.data.myVideoUrl),e.ready(function(){$("div.closevedio").show(),this.show(),this.play(),e.on("ended",function(){$(".m").hide(),this.pause(),this.hide(),$("#single_video").addClass("on").show()})})}),$("div.closevedio").click(function(){$(".m").hide(),e.hide(),e.pause(),$("#single_video").addClass("on").show()}),$("#single_video").addClass("on").show()):""==t.data.myVideoUrl&&""!=t.data.my3DCode&&($("#show3DBtn").on("click",function(){t.process3DShow(t.data.my3DCode,t.data.my3DExtra)}),$("#show3DBtn").show(),$("#single_3D").addClass("on").show())}catch(t){PDUtil.debug("videoPlayers组件=> render方法错误 ----------->"),PDUtil.debug(t)}},process3DShow:function(t,e){if(/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)){if(t)try{call3DShow(t)}catch(t){PDUtil.debug("videoPlayers组件=> process3DShow方法错误 ----------->"),PDUtil.debug(t)}}else if(/(Android)/i.test(navigator.userAgent)&&t)try{window.HomeIntent.call3DShow(t,e)}catch(t){PDUtil.debug("videoPlayers组件=> process3DShow方法错误 ----------->"),PDUtil.debug(t)}}},window.components||(window.components={}),window.components.videoPlayers=t}();
//# sourceMappingURL=../debugmaps/components.js.map
